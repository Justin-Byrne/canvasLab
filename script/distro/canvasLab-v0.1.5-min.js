/** 
 * canvasLab - HTML5 canvas drawing framework 
 * Copyright (C) 2023  Justin D. Byrne 
 * 
 * This library is free software; you can redistribute it and/or 
 * modify it under the terms of the GNU Library General Public 
 * License as published by the Free Software Foundation; either 
 * version 2 of the License, or (at your option) any later version. 
 * 
 * This library is distributed in the hope that it will be useful, 
 * but WITHOUT ANY WARRANTY; without even the implied warranty of 
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU 
 * Library General Public License for more details. 
 * 
 * You should have received a copy of the GNU Library General Public 
 * License along with this library; if not, write to the 
 * Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, 
 * Boston, MA  02110-1301, USA. 
 * 
 * Byrne-Systems, hereby disclaims all copyright interest in 
 * the library 'canvasLab' (HTML5 canvas drawing framework) written 
 * by Justin D. Byrne. (justin@byrne-systems.com) 
 */ 

"use strict";const PROPERTY_BLOCKS={discrete:{canvas:{set(t){this._canvas=void 0===t?window.canvaslab instanceof canvasLab?document.getElementById(window.canvaslab.canvas).getContext("2d"):this._canvas:this._isInDom(t)?document.getElementById(t).getContext("2d"):console.warn(`"${t}" is not a valid DOM element !`)},get(){return null!=this._canvas?this._canvas.canvas.id:void 0}},offset:{set(t){this._offset=this._isPoint(t)?t:this._offset},get(){return this._offset}},offsetX:{set(t){this._offset.x=t},get(){return this._offset.x}},offsetY:{set(t){this._offset.y=t},get(){return this._offset.y}},point:{set(t){this._point=this._isPoint(t)?t:this._point},get(){return this._point}},pointX:{set(t){this._point.x=t},get(){return this._point.x}},pointY:{set(t){this._point.y=t},get(){return this._point.y}}},combined:{canvas:{set(t){this._canvas=void 0===t?window.canvaslab instanceof canvasLab?document.getElementById(window.canvaslab.canvas).getContext("2d"):this._canvas:this._isInDom(t)?document.getElementById(t).getContext("2d"):console.warn(`"${t}" is not a valid DOM element !`);for(var s of this)s.canvas=t},get(){return null!=this._canvas?this._canvas.canvas.id:void 0}},start:{set(t){this._isPoint(t)&&(this._start=this.origin.start=t)},get(){return this._start}},end:{set(t){this._isPoint(t)&&(this._end=this.origin.end=t)},get(){return this._end}}}},UTILITIES={clearCanvas(t){var s=document.getElementById(this.canvas);t&&this._canvas.clearRect(0,0,s.width,s.height)},draw:{axis(t=20,s){var i=new Lines(new Line,new Line);i.stroke.color="235, 81, 73",i.point=this.center,i.canvas=(this instanceof Point?this.options._master:this).canvas,[i[0].start.x,i[0].end.x]=[-t,+t],[i[1].start.y,i[1].end.y]=[-t,+t],i.draw()},border(t,s="235, 81, 73"){this._isAspect(t)?((t=new Rectangle(this.center,t)).stroke.color=s,t.fill.alpha=0,t.canvas=(this instanceof Point?this.options._master:this).canvas,t.draw()):console.warn(`"${value}" is not a valid aspect !`)},collection:{typical(t){if(null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D)if(0<this.length)for(var s of this)s.point=new Point(s.origin.x+this.x,s.origin.y+this.y),s.draw();else console.warn(`No ${this.constructor.name} exist to draw !`);else console.warn(`'canvas' property is not set for ${this.constructor.name} !`)},aTypical(t){if(null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D)if(0<this.length){for(var s of this)this._setAspect(),this._setAnchorPoint(),s._start=new Point(s.origin.start.x+this.x,s.origin.start.y+this.y),s._end=new Point(s.origin.end.x+this.x,s.origin.end.y+this.y),s.draw();this._drawOptions()}else console.warn(`No ${this.constructor.name} exist to draw !`);else console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}},get:{rgb(t){return(t=t.split(","))[0].trim()+", "+t[1].trim()+", "+t[2].trim()}},pushPop(t){let s=void 0;if(t instanceof this._storage.type)if(null!=this._canvas&&(t.canvas=this.canvas),0!=this.length){for(var i in this)if(this[i]instanceof this._storage.type){if(!this[i].isThere(t))break;s=i}null!=s?this.splice(s,1):this.push(t)}else this[0]=t;else console.warn(`${this.constructor.name} only accepts '${this._storage.type.name}' objects !`)},rotatePoint(t={x:x,y:y},s,i){var e=new Point,s=s%360;return e.x=t.x+Math.cos(s*Math.PI/180)*i,e.y=t.y+Math.sin(s*Math.PI/180)*i,e},set:{all(t,s){var i=this.constructor.name.replace("Collection","").toLowerCase();if(this["_"+t]=s,0<this._master.length)for(var e of this._master)e[i][t]=s},shadow(){this._canvas.shadowBlur=this._shadow.blur,this._canvas.shadowOffsetX=this._shadow.x,this._canvas.shadowOffsetY=this._shadow.y,this._canvas.shadowColor=`rgba(${this._shadow.color}, ${this._shadow.alpha})`}}},VALIDATION={isAnchor(t){var s;for(s of["center","top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"])if(t===s)return!0;return!1},isAlpha(t){return"number"==typeof t&&0<=t&&t<=1},isAspect(t){var s=t instanceof Aspect,i=2==Object.keys(t).length,e=!!t.hasOwnProperty("width")&&"number"==typeof t.width,t=!!t.hasOwnProperty("height")&&"number"==typeof t.height;return s||e&&t&&i},isBlur(t){return"number"==typeof t&&0<=t},isCanvasLabObject(t){return t instanceof Line||t instanceof Circle||t instanceof Rectangle||t instanceof Text},isDegree(t){return"number"==typeof t&&t<=360},isInDom(t){return null!=document.getElementById(t)},isNumber(t){return"number"==typeof t&&!isNaN(t)},isPoint(t){var s=t instanceof Point,i=2==Object.keys(t).length,e=!!t.hasOwnProperty("x")&&"number"==typeof t.x,t=!!t.hasOwnProperty("y")&&"number"==typeof t.y;return s||i&&e&&t},isRadian(t){return"number"==typeof t&&0<=t&&t<=6.283185307179586},isRadius(t){return"number"==typeof t&&0<t},isRgb(t){return/\b([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5]),(\s*)?([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5]),(\s*)?([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5])\b/.test(t)},isSegments(t){return!!Array.isArray(t)&&function(t){let s=void 0;for(var i of t)if(0==(s="number"==typeof i))break;return s}(t)},isType(t){return"number"==typeof t&&0<=t&&t<=1},isWidth(t){return"number"==typeof t&&0<=t}},DEBUG={setCanvasStyleToHTML(t){t=document.getElementById(t);[t.style.width,t.style.height]=[t.width+"px",t.height+"px"]},setCanvasStyleToHTMLMAX(t){t=document.getElementById(t);t.style.width=t.style.height="100%"},fixBlur(t){var s=window.devicePixelRatio,t=document.getElementById(t),i=+getComputedStyle(t).getPropertyValue("height").slice(0,-2),e=+getComputedStyle(t).getPropertyValue("width").slice(0,-2);t.setAttribute("height",i*s),t.setAttribute("width",e*s)}};class canvasLab{_canvas=void 0;_canvases=void 0;_font=void 0;_state=void 0;#application=new Application;#config={processing:{pre:void 0,post:{canvas:{state:void 0},line:{prior:{},cache:{}},redraw:{}}}};constructor(t){this._isInDom=VALIDATION.isInDom,this._init(),this.canvas=t}set canvas(t){this._canvas=this._isInDom(t)?document.getElementById(t).getContext("2d"):this._canvas}get canvas(){return this._canvas.canvas.id}set canvases(t){t=this._isInDom(t)?document.getElementById(t).getContext("2d"):void 0;null==this._canvases&&(this._canvases=new Array),null!=t&&this._canvases.push(t)}get canvases(){return this._canvases}set font(t){this._font="string"==typeof t?t:this._font}get font(){return this._canvas.font}set state(t){t=null==t&&this._canvas instanceof CanvasRenderingContext2D?this.canvas:t;window.app.setState(t)}get state(){window.app.getState(_canvas)}_isInDom(){}clear(t){console.log("clear")}animate(t={timing:timing,draw:draw,duration:duration}){this.#application.animation=t}_init(){var t=document.getElementsByTagName("canvas");if("object"==typeof t&&void 0===this._canvases)for(var s in t)0==s?this.canvas=t[s].id:this.canvases=t[s].id}}class Anchor{_point=new Point;_align="center";constructor(){this._isAnchor=VALIDATION.isAnchor}set x(t){this._point.x=t}get x(){return this._point.x}set y(t){this._point.y=t}get y(){return this._point.y}set align(t){this._align=this._isAnchor(t)?t:this._align}get align(){return this._align}_isAnchor(){}}class Angle{_start=0;_end=360;_clockwise=!0;constructor(t,s,i){this._isRadian=VALIDATION.isRadian,this._isDegree=VALIDATION.isDegree,this.start=t,this.end=s,this.clockwise=i}set start(t){this._start=this._isDegree(t)?t:this._start}get start(){return this._start}get startInRadians(){return this._convert2Radian(this.start)}set end(t){this._end=this._isDegree(t)?t:this._end}get end(){return this._end}get endInRadians(){return this._convert2Radian(this.end)}set clockwise(t){this._clockwise="boolean"==typeof t?t:this._clockwise}get clockwise(){return this._clockwise}_isRadian(){}_isDegree(){}_convert2Radian(t){return this._isDegree?t*(Math.PI/180):console.warn(t+" is not a degree value !")}_convert2Degree(t){return this._isRadian?t/(Math.PI/180):console.warn(t+" is not a radian value !")}}class Aspect{_width=0;_height=0;constructor(t,s){this.width=t,this.height=s}set width(t){this._width="number"==typeof t&&0<t?t:this._width}get width(){return this._width}set height(t){this._height="number"==typeof t&&0<t?t:this._height}get height(){return this._height}get heightCenter(){return this.height/2}get widthCenter(){return this.width/2}get center(){return new Point(this.widthCenter,this.heightCenter)}}class ControlPoints{_p0=0;_p1=0;_p2=0;_p3=0;constructor(t,s,i,e){this._isNumber=VALIDATION.isNumber,this.p0=t,this.p1=s,this.p2=i,this.p3=e}set p0(t){this._p0=this._isNumber(t)?t:this._p0}get p0(){return this._p0}set p1(t){this._p1=this._isNumber(t)?t:this._p1}get p1(){return this._p1}set p2(t){this._p2=this._isNumber(t)?t:this._p2}get p2(){return this._p2}set p3(t){this._p3=this._isNumber(t)?t:this._p3}get p3(){return this._p3}_isNumber(){}}class Fill{_color="255, 255, 255";_alpha=1;constructor(t,s){this._isRgb=VALIDATION.isRgb,this._isAlpha=VALIDATION.isAlpha,this._getRgb=UTILITIES.get.rgb,this.color=t,this.alpha=s}set color(t){this._color=this._isRgb(t)?this._getRgb(t):this._color}get color(){return this._color}set alpha(t){this._alpha=this._isAlpha(t)?t:this._alpha}get alpha(){return this._alpha}_isRgb(){}_isAlpha(){}_getRgb(){}}class Font{_type=void 0;_size=24;_weight="normal";_maxWidth=void 0;_offset=new Point;#_options={weight:["normal","bold","italic"]};set type(t){var s;this._type="string"==typeof t?t:this._type,void 0===t&&(window.canvaslab instanceof canvasLab?(t=/(\w+(\s))?(?<size>\d+)px\s(?<type>\w.+)/,s=canvaslab.font,this._type=t.test(s)?t.exec(s).groups.type:this._type):console.warn("canvaslab is not instantiated !"))}get type(){return this._type}set size(t){this._size="number"==typeof t?t:this._size}get size(){return this._size}set weight(t){var s,i=this._weight;for(s of this.#_options.weight)if(this._weight=t==s?t:this._weight,this._weight!=i)break}get weight(){return this._weight}set maxWidth(t){this._maxWidth="number"==typeof t?t:this._maxWidth}get maxWidth(){return this._maxWidth}get offset(){return this._offset}set font(t){this.font=/(\w+(-\w+?)?|[1-9][0][0]?)(\s?)\d{1,3}px\s\w.+/.test(t)?t:this.font}get font(){return`${this._weight} ${this._size}px `+this._type}}class Options{_shadow=!1;_border=!1;_axis=!1;_points=!1;_anchor=!1;_coordinates=!1;_controlPoints=!1;_master=void 0;constructor(t,s,i,e,o,a,n){this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this.shadow=t,this.border=s,this.axis=i,this.points=e,this.anchor=o,this.coordinates=a,this.controlPoints=n}set shadow(t){this._shadow="boolean"==typeof t?t:this._shadow}get shadow(){return this._shadow}set border(t){this._border="boolean"==typeof t?t:this._border}get border(){return this._border}set axis(t){this._axis="boolean"==typeof t?t:this._axis}get axis(){return this._axis}set anchor(t){this._anchor="boolean"==typeof t?t:this._anchor}get anchor(){return this._anchor}set coordinates(t){this._coordinates="boolean"==typeof t?t:this._coordinates}get coordinates(){return this._coordinates}set controlPoints(t){this._controlPoints="boolean"==typeof t?t:this._controlPoints}get controlPoints(){return this._controlPoints}set master(t){this._master=this._isCanvasLabObject(t)?t:this._master}get master(){return this._master}_isCanvasLabObject(){}}class Point{_x=0;_y=0;_canvas=void 0;#_options=new Options;constructor(t,s){this._isInDom=VALIDATION.isInDom,this._isAspect=VALIDATION.isAspect,this._drawBorder=UTILITIES.draw.border,this._drawAxis=UTILITIES.draw.axis,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.discrete.canvas),delete this.#_options._shadow,delete this.#_options._border,this.x=t,this.y=s}set x(t){this._x="number"!=typeof t||isNaN(t)?this._x:t}get x(){return this._x}set y(t){this._y="number"!=typeof t||isNaN(t)?this._y:t}get y(){return this._y}set canvas(t){}get canvas(){}get options(){return this.#_options}get center(){return new Point(this.x,this.y)}_isInDom(){}_isAspect(){}_drawBorder(){}_drawAxis(){}drawOptions(){var t=new Aspect(20,20);this._drawBorder(t),this._drawAxis()}invert(){var t=this.y;[this.y,this.x]=[this.x,t]}}class Shadow{_color="0, 0, 0";_alpha=1;_blur=3;_offset=new Point;constructor(t,s,i,e={x:void 0,y:void 0}){this._isRgb=VALIDATION.isRgb,this._isAlpha=VALIDATION.isAlpha,this._isBlur=VALIDATION.isBlur,this._isPoint=VALIDATION.isPoint,this._getRgb=UTILITIES.get.rgb,Object.defineProperty(this,"offset",PROPERTY_BLOCKS.discrete.offset),Object.defineProperty(this,"x",PROPERTY_BLOCKS.discrete.offsetX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.discrete.offsetY),this.color=t,this.alpha=s,this.blur=i,this.offset=e}set color(t){this._color=this._isRgb(t)?this._getRgb(t):this._color}get color(){return this._color}set alpha(t){this._alpha=this._isAlpha(t)?t:this._alpha}get alpha(){return this._alpha}set blur(t){this._blur=this._isBlur(t)?t:this._blur}get blur(){return this._blur}set offset(t){}get offset(){}set x(t){}get x(){}set y(t){}get y(){}_isRgb(){}_isAlpha(){}_isBlur(){}_isPoint(){}_getRgb(){}}class Stage{}class Stroke{_type=0;_segments=[5,5];_color="0, 0, 0";_alpha=1;_width=1;constructor(t,s,i,e,o){this._isType=VALIDATION.isType,this._isSegments=VALIDATION.isSegments,this._isRgb=VALIDATION.isRgb,this._isAlpha=VALIDATION.isAlpha,this._isWidth=VALIDATION.isWidth,this._getRgb=UTILITIES.get.rgb,this.type=t,this.segments=s,this.color=i,this.alpha=e,this.width=o}set type(t){this._type=this._isType(t)?t:this._type}get type(){return this._type}set segments(t){this._segments=this._isSegments(t)?t:this._segments}get segments(){return this._segments}set color(t){this._color=this._isRgb(t)?this._getRgb(t):this._color}get color(){return this._color}set alpha(t){this._alpha=this._isAlpha(t)?t:this._alpha}get alpha(){return this._alpha}set width(t){this._width=this._isWidth(t)?t:this._width}get width(){return this._width}_isType(){}_isSegments(){}_isRgb(){}_isAlpha(){}_isWidth(){}_getRgb(){}}class OptionsCollection{_shadow=!1;_border=!1;_axis=!1;_points=!1;_coordinates=!1;_controlPoints=!1;constructor(t,s,i,e,o){this._setAll=UTILITIES.set.all,this.shadow=t,this.border=s,this.axis=i,this.points=e,this.coordinates=o}set shadow(t){"boolean"==typeof t&&this._setAll("shadow",t)}get shadow(){return this._shadow}set border(t){"boolean"==typeof t&&this._setAll("border",t)}get border(){return this._border}set axis(t){"boolean"==typeof t&&this._setAll("axis",t)}get axis(){return this._axis}set coordinates(t){"boolean"==typeof t&&this._setAll("coordinates",t)}get coordinates(){return this._coordinates}set controlPoints(t){"boolean"==typeof t&&this._setAll("controlPoints",t)}get controlPoints(){return this._controlPoints}_setAll(){}}class PointCollection{_x=0;_y=0;#_options=new OptionsCollection;constructor(){this._setAll=UTILITIES.set.all,delete this.#_options._shadow,delete this.#_options._border}set x(t){"number"==typeof t&&this._setAll("x",t)}get x(){return this._x}set y(t){"number"==typeof t&&this._setAll("y",t)}get y(){return this._y}get options(){return this.#_options}invert(){var t=this.y;[this.y,this.x]=[this.x,t]}_setAll(){}}class ShadowCollection{_color="0, 0, 0";_alpha=1;_blur=3;_offset=new Point;constructor(){this._isRgb=VALIDATION.isRgb,this._isAlpha=VALIDATION.isAlpha,this._isBlur=VALIDATION.isBlur,this._isPoint=VALIDATION.isPoint,this._getRgb=UTILITIES.get.rgb,this._setAll=UTILITIES.set.all}set color(t){this._isRgb(t)&&this._setAll("color",t)}get color(){return this._color}set alpha(t){this._isAlpha(t)&&this._setAll("alpha",t)}get alpha(){return this._alpha}set blur(t){this._isBlur(t)&&this._setAll("blur",t)}get blur(){return this._blur}set offset(t){this._isPoint(t)&&this._setAll("offset",t)}get offset(){return this._offset}set x(t){this._offset.x=t}get x(){return this._offset.x}set y(t){this._offset.y=t}get y(){return this._offset.y}_isRgb(){}_isAlpha(){}_isBlur(){}_isPoint(){}_getRgb(){}_setAll(){}}class StrokeCollection{_type=0;_segments=[5,5];_color="0, 0, 0";_alpha=1;_width=2;_master=void 0;constructor(){this._isType=VALIDATION.isType,this._isSegments=VALIDATION.isSegments,this._isRgb=VALIDATION.isRgb,this._isAlpha=VALIDATION.isAlpha,this._isWidth=VALIDATION.isWidth,this._getRgb=UTILITIES.get.rgb,this._setAll=UTILITIES.set.all}set type(t){this._isType(t)&&this._setAll("type",t)}get type(){return this._type}set segments(t){this._isSegments(t)&&this._setAll("segments",t)}get segments(){return this._segments}set color(t){this._isRgb(t)&&this._setAll("color",t)}get color(){return this._color}set alpha(t){this._isAlpha(t)&&this._setAll("alpha",t)}get alpha(){return this._alpha}set width(t){this._isWidth(t)&&this._setAll("width",t)}get width(){return this._width}set master(t){this._master="object"==typeof t?t:console.error(`[ERROR] "${t.constructor.name}", is not a valid type !`)}_isType(){}_isSegments(){}_isRgb(){}_isAlpha(){}_isWidth(){}_getRgb(){}_setAll(){}}class Circle{_point=new Point;_radius=25;_angle=new Angle;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_canvas=void 0;#_anchor=new Anchor;#_options=new Options;constructor(t={x:void 0,y:void 0},s,i={start:void 0,end:void 0,clockwise:void 0},e={type:void 0,segments:void 0,color:void 0,alpha:void 0,width:void 0},o={color:void 0,alpha:void 0},a={color:void 0,alpha:void 0,blur:void 0,offset:{x:void 0,y:void 0}},n=void 0){this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isBase=VALIDATION.isBase,this._isAspect=VALIDATION.isAspect,this._isAnchor=VALIDATION.isAnchor,this._rotatePoint=UTILITIES.rotatePoint,this._clearCanvas=UTILITIES.clearCanvas,this._setShadow=UTILITIES.set.shadow,this._drawBorder=UTILITIES.draw.border,this._drawAxis=UTILITIES.draw.axis,Object.defineProperty(this,"point",PROPERTY_BLOCKS.discrete.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.discrete.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.discrete.pointY),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.discrete.canvas),delete this.#_options._points,delete this.#_options._controlPoints,delete this.#_options._master,this.point=t,this.radius=s,this._angle=new Angle(i.start,i.end,i.clockwise),this._stroke=new Stroke(e.type,e.segments,e.color,e.alpha,e.width),this._fill=new Fill(o.color,o.alpha),this._shadow=new Shadow(a.color,a.alpha,a.blur,{x:a.offset.x,y:a.offset.y}),this.canvas=n,this.#_options.shadow=null!=a.offset.x&&null!=a.offset.y}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set radius(t){this._radius="number"==typeof t&&0<t?t:this._radius}get radius(){return this._radius}get angle(){return this._angle}get stroke(){return this._stroke}get fill(){return this._fill}get shadow(){return this._shadow}set canvas(t){}get canvas(){}get anchor(){return this.#_anchor}get options(){return this.#_options}get area(){return Math.PI*Math.pow(this.radius,2)}get diameter(){return 2*this.radius}get circumference(){return Math.PI*this.diameter()}get center(){this._setAnchorPoint();var t=this.x-(this.x-this.anchor.x),s=this.y-(this.y-this.anchor.y);return new Point(t,s)}_isDegree(){}_isInDom(){}_isPoint(){}_isAspect(){}_isAnchor(){}_rotatePoint(){}_clearCanvas(){}_setShadow(){}_drawBorder(){}_drawAxis(){}_drawOptions(){var t=this.radius+20,s=new Aspect(this.radius+t,this.radius+t);this.#_options.border&&this._drawBorder(s),this.#_options.axis&&this._drawAxis(t),this.#_options.anchor&&this._drawAnchor(),this.#_options.coordinates&&this.showCoordinates()}_drawAnchor(){var t=new Rectangle(new Point(this.x,this.y),new Aspect(5,5));t.fill.color="255, 0, 0",t.canvas=this.canvas,t.draw()}_setAnchorPoint(){switch([this.#_anchor.x,this.#_anchor.y]=[this.x,this.y],this.anchor.type){case"center":break;case"top":this.anchor.y+=this.radius;break;case"topRight":this.anchor.x-=this.radius,this.anchor.y+=this.radius;break;case"right":this.anchor.x-=this.radius;break;case"bottomRight":this.anchor.x-=this.radius,this.anchor.y-=this.radius;break;case"bottom":this.anchor.y-=this.radius;break;case"bottomLeft":this.anchor.x+=this.radius,this.anchor.y-=this.radius;break;case"left":this.anchor.x+=this.radius;break;case"topLeft":this.anchor.x+=this.radius,this.anchor.y+=this.radius}}showCoordinates(t=10,s=16){var i=new Text(this.point,`( ${this.x}, ${this.y} )`);i.canvas=this.canvas,i.size=s,i.options.shadow=!1,i.offset.y=t/2,i.options.shadow=!0,i.shadow.color="255, 255, 255",i.shadow.alpha=i.shadow.blur=1,i.shadow.x=i.shadow.y=1,i.draw()}move(t,s,i=!0){t=this._rotatePoint({x:this.x,y:this.y},t,s);[this.x,this.y]=[t.x,t.y],this._clearCanvas(i),this.draw()}rotate(t,s=!0){var i,e;this._isDegree(t)&&([i,e]=[this.x,this.y],this._canvas.save(),this._canvas.translate(i,e),this._canvas.rotate(t%360*Math.PI/180),this._canvas.translate(-i,-e),this._clearCanvas(s),this.draw(),this._canvas.restore())}isThere(t){if(t instanceof this.constructor)return this.point.x==t.point.x&&this.point.y==t.point.y&&this.radius==t.radius;console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name)}draw(t){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this._setAnchorPoint(),this.#_options.shadow&&this._setShadow(),this._canvas.strokeStyle=`rgba(${this.stroke.color}, ${this.stroke.alpha})`,this._canvas.fillStyle=`rgba(${this.fill.color}, ${this.fill.alpha})`,this._canvas.lineWidth=this.stroke.width,this._canvas.setLineDash(this.stroke.type?this.stroke.segments:[]),this._canvas.beginPath(),this._canvas.arc(this.anchor.x,this.anchor.y,this.radius,this.angle.startInRadians,this.angle.endInRadians,!this.angle.clockwise),this._canvas.stroke(),this._canvas.fill(),this.#_options.shadow&&(this._canvas.shadowColor="rgba(0, 0, 0, 0)"),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}redraw(t,s={x:void 0,y:void 0},i=!0){[this.x,this.y]=[s.x,s.y],this._clearCanvas(i),this.draw(t)}}class Line{_start=new Point;_end=new Point;_stroke=new Stroke;_shadow=new Shadow;_lineCap="round";_canvas=void 0;#_options=new Options;#_controlPoints=new ControlPoints;constructor(t={x:void 0,y:void 0},s={x:void 0,y:void 0},i={type:void 0,segments:void 0,color:void 0,alpha:void 0,width:void 0},e={color:void 0,alpha:void 0,blur:void 0,offset:{x:void 0,y:void 0}},o=void 0,a){var n;this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isNumber=VALIDATION.isNumber,this._isAspect=VALIDATION.isAspect,this._rotatePoint=UTILITIES.rotatePoint,this._clearCanvas=UTILITIES.clearCanvas,this._pointOrSpan=UTILITIES.pointOrSpan,this._setShadow=UTILITIES.set.shadow,this._drawBorder=UTILITIES.draw.border,this._drawAxis=UTILITIES.draw.axis,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.discrete.canvas),null!=t&&(this._isPoint(t)&&([this.start.x,this.end.x]=[t.x,s.x]),this._isNumber(t))&&(this.start.y=s.y-(n=t/2),this.end.y=s.y+n,this.start.x=this.end.x=s.x),null!=s&&(this._isPoint(s)&&([this.start.y,this.end.y]=[t.y,s.y]),this._isNumber(s))&&(this.start.x=t.x-(n=s/2),this.end.x=t.x+n,this.start.y=this.end.y=t.y),this._stroke=new Stroke(i.type,i.segments,i.color,i.alpha,i.width),this._shadow=new Shadow(e.color,e.alpha,e.blur,{x:e.offset.x,y:e.offset.y}),this.lineCap=o,this.canvas=a,this.#_options.shadow=null!=e.offset.x&&null!=e.offset.y,((this.#_options.master=this)._start.options.master=this)._end.options.master=this,Object.defineProperty(this.#_options,"points",{set(t){this._points="boolean"==typeof t?t:this.#_options.points,this._master._start.options.points=t,this._master._end.options.points=t},get(){return this._points}})}set start(t){this._start=this._isPoint(t)?t:this._start}get start(){return this._start}set end(t){this._end=this._isPoint(t)?t:this._end}get end(){return this._end}get stroke(){return this._stroke}get shadow(){return this._shadow}set lineCap(t){this._lineCap="butt"===t||"round"===t||"square"===t?t:this._lineCap}get lineCap(){return this._lineCap}set canvas(t){}get canvas(){}get options(){return this.#_options}get controlPoints(){return this.#_controlPoints}get center(){var t=this.start.x>this.end.x?this.end.x+(this.start.x-this.end.x)/2:this.start.x+(this.end.x-this.start.x)/2,s=this.start.y>this.end.y?this.end.y+(this.start.y-this.end.y)/2:this.start.y+(this.end.y-this.start.y)/2;return new Point(t,s)}_isPoint(){}_isNumber(){}_isDegree(){}_isInDom(){}_isAspect(){}#_setPath(){0!=this.controlPoints.p0||0!=this.controlPoints.p1||0!=this.controlPoints.p2||0!=this.controlPoints.p3?this._canvas.bezierCurveTo(this.controlPoints.p0+this.start.x,this.controlPoints.p1+this.start.y,this.controlPoints.p2+this.end.x,this.controlPoints.p3+this.end.y,this.end.x,this.end.y):this._canvas.lineTo(this.end.x,this.end.y)}_rotatePoint(){}_clearCanvas(){}_pointOrSpan(){}_setShadow(){}_drawBorder(){}_drawAxis(){}_drawOptions(){var t=new Aspect(this.end.x-this.start.x+20,this.end.y-this.start.y+20);this.#_options.border&&this._drawBorder(t),this.#_options.axis&&this._drawAxis(),this.#_options.points&&this.drawPoints(),this.#_options.coordinates&&this.showCoordinates(),this.#_options.controlPoints&&this.showControlPoints()}drawPoints(){this._start.drawOptions(),this._end.drawOptions()}showCoordinates(t=10,s=16){var i=new Text(this.start,`( ${this.start.x}, ${this.start.y} )`),e=new Text(this.end,`( ${this.end.x}, ${this.end.y} )`);i.canvas=e.canvas=this.canvas,i.size=e.size=s,i.options.shadow=e.options.shadow=!1,i.offset.y=e.offset.y=-2*t,i.options.shadow=e.options.shadow=!0,i.shadow.color=e.shadow.color="255, 255, 255",i.shadow.alpha=e.shadow.alpha=i.shadow.blur=e.shadow.blur=1,i.shadow.x=e.shadow.x=i.shadow.y=e.shadow.y=1,i.draw(),e.draw()}showControlPoints(t=10,s=16){var i=new Point(this.start.x,this.start.y),e=new Point(this.controlPoints.p0+this.start.x,this.controlPoints.p1+this.start.y),o=new Point(this.controlPoints.p2+this.end.x,this.controlPoints.p3+this.end.y),a=new Point(this.end.x,this.end.y),n=new Text(e.x,e.y,`( ${this.#_controlPoints.p0}, ${this.#_controlPoints.p1} )`),h=new Text(o.x,o.y,`( ${this.#_controlPoints.p3}, ${this.#_controlPoints.p4} )`),s=(n.canvas=h.canvas=this.canvas,n.size=h.size=s,n.offset.y=h.offset.y=-2*t,n.stroke.color=h.stroke.color="255, 0, 0 ",n.options.shadow=h.options.shadow=!0,n.shadow.color=h.shadow.color="255, 255, 255",n.shadow.alpha=h.shadow.alpha=n.shadow.blur=h.shadow.blur=1,n.shadow.x=h.shadow.x=n.shadow.y=h.shadow.y=1,n.draw(),h.draw(),"255, 0, 0"),t="0, 0, 255",n=new Line(i,e),h=new Line(o,a),i=new Line(e,o),a=(new Lines(n,h,i),n.stroke.type=h.stroke.type=i.stroke.type=1,n.stroke.segments=h.stroke.segments=i.stroke.segments=[2,4],n.canvas=h.canvas=i.canvas=this.canvas,[n.stroke.color,h.stroke.color,i.stroke.color]=[s,t,"0, 255, 0"],n.draw(),h.draw(),i.draw(),new Circle(e)),n=new Circle(o);a.radius=n.radius=3,a.stroke.alpha=n.stroke.alpha=0,a.canvas=n.canvas=this.canvas,[a.fill.color,n.fill.color]=[s,t],a.draw(),n.draw()}move(t,s,i=!0){var e=this._rotatePoint({x:this.start.x,y:this.start.y},t,s),t=this._rotatePoint({x:this.end.x,y:this.end.y},t,s);[this.start.x,this.start.y]=[e.x,e.y],[this.end.x,this.end.y]=[t.x,t.y],this._clearCanvas(i),this.draw()}rotate(t,s="center",i=!0){if(this._isDegree(t)){var e=new Point;switch(s){case"start":[e.x,e.y]=[this.start.x,this.start.y];break;case"end":[e.x,e.y]=[this.end.x,this.end.y];break;case"center":[e.x,e.y]=[.5*(this.start.x+this.end.x),.5*(this.start.y+this.end.y)];break;default:console.warn(`"${s}" is not a valid 'anchor' variable !`)}this._canvas.save(),this._canvas.translate(e.x,e.y),this._canvas.rotate(t%360*Math.PI/180),this._canvas.translate(-e.x,-e.y),this._clearCanvas(i),this.draw(),this._canvas.restore()}}curve(t,s,i,e){this.controlPoints.p0=t,this.controlPoints.p1=s,this.controlPoints.p2=i,this.controlPoints.p3=e}isThere(t){var s,i,e,o;if(t instanceof this.constructor)return s=this.start.x+" "+this.start.y,i=this.end.x+" "+this.end.y,e=t.start.x+" "+t.start.y,o=t.end.x+" "+t.end.y,s==e&&i==o||s==o&&i==e;console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name)}draw(t){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this.#_options.shadow&&this._setShadow(),this._canvas.strokeStyle=`rgba(${this.stroke.color}, ${this.stroke.alpha})`,this._canvas.lineCap=this.lineCap,this._canvas.lineWidth=this.stroke.width,this._canvas.setLineDash(this.stroke.type?this.stroke.segments:[]),this._canvas.beginPath(),this._canvas.moveTo(this.start.x+.5,this.start.y+.5),this.#_setPath(),this._canvas.stroke(),this.#_options.shadow&&(this._canvas.shadowColor="rgba(0, 0, 0, 0)"),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}redraw(t,s={x:void 0,y:void 0},i={x:void 0,y:void 0},e=!0){[this.start.x,this.start.y]=[s.x,s.y],[this.end.x,this.end.y]=[i.x,i.y],this._clearCanvas(e),this.draw(t)}}class Rectangle{_point=new Point;_aspect=new Aspect;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_canvas=void 0;#_anchor=new Anchor;#_options=new Options;constructor(t={x:void 0,y:void 0},s={width:void 0,height:void 0},i={type:void 0,segments:void 0,color:void 0,alpha:void 0,width:void 0},e={color:void 0,alpha:void 0},o={color:void 0,alpha:void 0,blur:void 0,offset:{x:void 0,y:void 0}},a){this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isAspect=VALIDATION.isAspect,this._rotatePoint=UTILITIES.rotatePoint,this._clearCanvas=UTILITIES.clearCanvas,this._setShadow=UTILITIES.set.shadow,this._drawBorder=UTILITIES.draw.border,this._drawAxis=UTILITIES.draw.axis,Object.defineProperty(this,"point",PROPERTY_BLOCKS.discrete.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.discrete.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.discrete.pointY),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.discrete.canvas),delete this.#_options._points,delete this.#_options._controlPoints,delete this.#_options._master,this.point=t,this.width=null!=s.width?s.width:50,this.height=null!=s.height?s.height:50,this._stroke=new Stroke(i.type,i.segments,i.color,i.alpha,i.width),this._fill=new Fill(e.color,e.alpha),this._shadow=new Shadow(o.color,o.alpha,o.blur,{x:o.offset.x,y:o.offset.y}),this.canvas=a,this.#_options.shadow=null!=o.offset.x&&null!=o.offset.y}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set aspect(t){this._aspect=this._isAspect(t)?t:this._aspect}get aspect(){return this._aspect}set width(t){this._aspect.width="number"==typeof t&&0<t?t:this._aspect._width}get width(){return this._aspect.width}set height(t){this._aspect.height="number"==typeof t&&0<t?t:this._aspect._height}get height(){return this._aspect.height}get stroke(){return this._stroke}get fill(){return this._fill}get shadow(){return this._shadow}set canvas(t){}get canvas(){}get anchor(){return this.#_anchor}get options(){return this.#_options}_isDegree(){}_isInDom(){}_isPoint(){}_rotatePoint(){}_clearCanvas(){}_setShadow(){}_drawBorder(){}_drawAxis(){}_drawOptions(){var t=new Aspect(this.width+20,this.height+20);this.#_options.border&&this._drawBorder(t),this.#_options.axis&&this._drawAxis(),this.#_options.anchor&&this._drawAnchor()}_drawAnchor(){var t=new Rectangle(new Point(this.x,this.y),new Aspect(5,5));t.fill.color="255, 0, 0",t.canvas=this.canvas,t.draw()}_setAnchorPoint(){switch([this.#_anchor.x,this.#_anchor.y]=[this.x,this.y],this.anchor.align){case"center":this.anchor.x-=this.width/2,this.anchor.y-=this.height/2;break;case"top":this.anchor.x-=this.width/2;break;case"topRight":this.anchor.x-=this.width;break;case"right":this.anchor.x-=this.width,this.anchor.y-=this.height/2;break;case"bottomRight":this.anchor.x-=this.width,this.anchor.y-=this.height;break;case"bottom":this.anchor.x-=this.width/2,this.anchor.y-=this.height;break;case"bottomLeft":this.anchor.y-=this.height;break;case"left":this.anchor.y-=this.height/2}}move(t,s,i=!0){t=this._rotatePoint({x:this.x,y:this.y},t,s);[this.x,this.y]=[t.x,t.y],this._clearCanvas(i),this.draw()}rotate(t,s=!0){var i,e;this._isDegree(t)&&([i,e]=[this.x,this.y],this._canvas.save(),this._canvas.translate(i,e),this._canvas.rotate(t%360*Math.PI/180),this._canvas.translate(-i,-e),this._clearCanvas(s),this.draw(),this._canvas.restore())}isThere(t){if(t instanceof this.constructor)return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height;console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name)}get area(){return this.width*this.height}get perimeter(){return 2*this.area}get center(){var t=this.x-(this.x-this.anchor.x)+this.width/2,s=this.y-(this.y-this.anchor.y)+this.height/2;return new Point(t,s)}draw(t){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this._setAnchorPoint(),this.#_options.shadow&&this._setShadow(),this._canvas.strokeStyle=`rgba(${this.stroke.color}, ${this.stroke.alpha})`,this._canvas.fillStyle=`rgba(${this.fill.color}, ${this.fill.alpha})`,this._canvas.lineWidth=this.stroke.width,this._canvas.setLineDash(this.stroke.type?this.stroke.segments:[]),this._canvas.beginPath(),this._canvas.rect(this.anchor.x,this.anchor.y,this.width,this.height),this._canvas.stroke(),this._canvas.fill(),this.#_options.shadow&&(this._canvas.shadowColor="rgba(0, 0, 0, 0)"),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class Text extends Font{_point=new Point;_text=void 0;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_canvas=void 0;#_options=new Options;constructor(t={x:void 0,y:void 0},s,i,e,o,a,n={x:void 0,y:void 0},h={type:void 0,segments:void 0,color:void 0,alpha:void 0,width:void 0},r={color:void 0,alpha:void 0},c={color:void 0,alpha:void 0,blur:void 0,offset:{x:void 0,y:void 0}},d){super(),this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._rotatePoint=UTILITIES.rotatePoint,this._clearCanvas=UTILITIES.clearCanvas,this._setShadow=UTILITIES.set.shadow,Object.defineProperty(this,"point",PROPERTY_BLOCKS.discrete.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.discrete.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.discrete.pointY),Object.defineProperty(this,"offset",PROPERTY_BLOCKS.discrete.offset),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.discrete.canvas),h.width=null!=h.width?h.width:0,r.color=null!=r.color?r.color:"0, 0, 0",this.point=t,this.text=s,super.type=i,super.size=e,super.weight=o,super.maxWidth=a,super.offset.x=n.x,super.offset.y=n.y,this._stroke=new Stroke(h.type,h.segments,h.color,h.alpha,h.width),this._fill=new Fill(r.color,r.alpha),this._shadow=new Shadow(c.color,c.alpha,c.blur,{x:c.offset.x,y:c.offset.y}),this.canvas=d,this.#_options.shadow=null!=c.offset.x&&null!=c.offset.y}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set text(t){this._text="string"==typeof t?t:void 0}get text(){return this._text}get stroke(){return this._stroke}get fill(){return this._fill}get shadow(){return this._shadow}set canvas(t){}get canvas(){}get options(){return this.#_options}set type(t){super.type=t}get type(){return super.type}set size(t){super.size=t}get size(){return super.size}set weight(t){super.weight=t}get weight(){return super.weight}set maxWidth(t){super.maxWidth=null==t&&null!=this._canvas?this._canvas.measureText(t):t}get maxWidth(){return super.maxWidth}set offset(t){}get offset(){}get font(){return super.font}_isDegree(){}_isInDom(){}_isPoint(){}#_drawOptions(){this.#_options.border&&this.drawBorder(),this.#_options.axis&&this.drawAxis()}_rotatePoint(){}_clearCanvas(){}_setShadow(){}drawBorder(t=10){new Aspect(this._canvas.measureText(this.text).width,super.size);var s=new Point(this.x-aspect.width/2-t,this.y-aspect.height/2-2*t);new Rectangle(s,aspect.width+2*t,aspect.height+2*t,{type:0,segments:void 0,color:"235, 81, 73",alpha:1,width:1},{color:void 0,alpha:0},void 0,this.canvas).draw()}drawAxis(t=10){new Aspect(this._canvas.measureText(this.text).width,super.size);var s=new Point(this.x-aspect.width/2-2*t,this.y-aspect.height/4),i=new Point(this.x+aspect.width/2+2*t,this.y-aspect.height/4),e=new Point(aspect.width,this.y-aspect.height-t),t=new Point(aspect.width,this.y+aspect.height/2+t),s=new Line(s,i,{type:0,segments:void 0,color:"235, 81, 73",alpha:1,width:1},void 0,void 0,this.canvas),i=new Line(e,t,{type:0,segments:void 0,color:"235, 81, 73",alpha:1,width:1},void 0,void 0,this.canvas);s.draw(),i.draw()}move(t,s,i=!0){t=this._rotatePoint({x:this.x,y:this.y},t,s);[this.x,this.y]=[t.x,t.y],this._clearCanvas(i),this.draw()}rotate(t,s="center",i=!0){if(this._isDegree(t)){var e=new Point,o=this._canvas.measureText(this.text).width/2,a=this.size/2;switch(s){case"topLeft":[e.x,e.y]=[e.x-o,e.y-a];break;case"topRight":[e.x,e.y]=[e.x+o,e.y-a];break;case"bottomRight":[e.x,e.y]=[e.x+o,e.y+a];break;case"bottomLeft":[e.x,e.y]=[e.x-o,e.y+a];break;case"center":[e.x,e.y]=[e.x,e.y-a];break;default:console.warn(`"${s}" is not a valid 'anchor' variable !`)}this._canvas.save(),this._canvas.translate(e.x,e.y),this._canvas.rotate(t%360*Math.PI/180),this._canvas.translate(-e.x,-e.y),this._clearCanvas(i),this.draw(),this._canvas.restore()}}draw(t,s=0){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this.#_options.shadow&&this._setShadow(),[this.x,this.y]=[this.x+this.offset.x,this.y+this.offset.y],this._canvas.font=this.font,this._canvas.textAlign="center",this._canvas.fillStyle=`rgba(${this.fill.color}, ${this.fill.alpha})`,this._canvas.fillText(this.text,this.x,this.y,this.maxWidth),0<this.stroke.width&&(this._canvas.strokeStyle=`rgba(${this.stroke.color}, ${this.stroke.alpha})`,this._canvas.strokeText(this.text,this.x,this.y,this.maxWidth)),this.#_options.shadow&&(this._canvas.shadowColor="rgba(0, 0, 0, 0)"),this.#_drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class Circles extends Array{_point=new Point;_canvas=void 0;_storage={type:Circle};constructor(t={x:void 0,y:void 0},s){super(),this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this.pushPop=UTILITIES.pushPop,this.draw=UTILITIES.draw.typicalCollection,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.combined.canvas),this.point=t,this.canvas=s}set point(t){this._point=this._isPoint(t)?t:this._point}get point(){return this._point}set x(t){this._point.x=t}get x(){return this._point.x}set y(t){this._point.y=t}get y(){return this._point.y}set canvas(t){}get canvas(){}_isInDom(){}_isPoint(){}pushPop(){}draw(){}}class Group extends Array{_point=new Point;_lines=new Lines;_circles=new Circles;_rectangles=new Rectangles;_text=new Texts;_canvas=void 0;constructor(t={x:void 0,y:void 0},s){super(),this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this.drawLines=UTILITIES.draw.typicalCollection,this.drawShapes=UTILITIES.draw.aTypicalCollection,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.combined.canvas),this.point=t,this.canvas=s}set point(t){this._point=this._isPoint(t)?t:this._point}get point(){return this._point}set x(t){this._point.x=t}get x(){return this._point.x}set y(t){this._point.y=t}get y(){return this._point.y}set canvas(t){}get canvas(){}_isInDom(){}_isPoint(){}push(t){for(var s of arguments)switch(s.constructor.name){case"Line":this._lines.push(s);break;case"Circle":this._circles.push(s);break;case"Rectangle":this._rectangles.push(s);break;case"Lines":for(var i of s)this._lines.push(i);break;case"Circles":for(var e of s)this._circles.push(e);break;case"Rectangles":for(var o of s)this._rectangles.push(o);break;default:console.warn(`"${s}" is not a supported type to be pushed into `+this.constructor.name)}}pop(t){for(var s of arguments)switch(s.constructor.name){case"Line":this._lines.push(s);break;case"Circle":this._circles.push(s);break;case"Rectangle":this._rectangles.push(s);break;case"Lines":for(var i of s)this._lines.push(i);break;case"Circles":for(var e of s)this._circles.push(e);break;case"Rectangles":for(var o of s)this._rectangles.push(o);break;default:console.warn(`"${s}" is not a supported type to be popped into `+this.constructor.name)}}drawLines(){}drawShapes(){}draw(t){null!=t&&(this.canvas=t),0<this.lines.length?this.drawLines(t):console.warn(`No ${this.constructor.name} exist to draw !`),0<this.circles.length?this.drawShapes(t):console.warn(`No ${this.constructor.name} exist to draw !`),0<this.rectangles.length?this.drawShapes(t):console.warn(`No ${this.constructor.name} exist to draw !`),0<this.texts.length?this.drawShapes(t):console.warn(`No ${this.constructor.name} exist to draw !`)}}class Lines extends Array{_point=new Point;_stroke=new StrokeCollection;_shadow=new ShadowCollection;_lineCap="round";_canvas=void 0;#_aspect=new Aspect;#_anchor=new Anchor;#_options=new Options;#_origin=new Point;_storage={type:Line};constructor(){super(),this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isAspect=VALIDATION.isAspect,this._drawBorder=UTILITIES.draw.border,this._drawAxis=UTILITIES.draw.axis,this.draw=UTILITIES.draw.collection.aTypical,Object.defineProperty(this,"point",PROPERTY_BLOCKS.discrete.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.discrete.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.discrete.pointY),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.combined.canvas),this.stroke.master=this,0<arguments.length&&this.push.apply(this,arguments)}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}get stroke(){return this._stroke}get shadow(){return this._shadow}get options(){return this.#_options}set lineCap(t){this._lineCap="butt"===t||"round"===t||"square"===t?t:this._lineCap}get lineCap(){return this._lineCap}set canvas(t){}get canvas(){}get aspect(){return this._setAspect(),this.#_aspect}get width(){return this.#_aspect.width}get height(){return this.#_aspect.height}set anchor(t){this.#_anchor.type=this._isAnchor(t)?t:this.#_anchor.type,this._setAnchorPoint()}get anchor(){return this.#_anchor}get area(){return this.width*this.height}get perimeter(){return 2*this.area}get center(){var t,s=(t,s,i)=>void 0===t?s:s<i?s<t?s:t:i<t?i:t;let i=void 0,e=void 0;for(t of this)i=s(i,t.start.x,t.end.x),e=s(e,t.start.y,t.end.y),this.#_origin=new Point(i,e);return[i,e]=[i+this.width/2,e+this.height/2],new Point(i,e)}#_appendProperties(t){Object.defineProperty(t,"origin",{value:{start:new Point(t.start.x,t.start.y),end:new Point(t.end.x,t.end.y)},writable:!1}),Object.defineProperty(t,"start",PROPERTY_BLOCKS.combined.start),Object.defineProperty(t,"end",PROPERTY_BLOCKS.combined.end)}_isInDom(){}_isPoint(){}_isAspect(){}_drawAxis(){}_drawBorder(){}_drawOptions(){var t=new Aspect(this.width+20,this.height+20);this.options.border&&this._drawBorder(t),this.options.axis&&this._drawAxis(),this.options.anchor&&this._drawAnchor()}_drawAnchor(){var t=new Rectangle(new Point(this.x,this.y),new Aspect(5,5));t.fill.color="255, 0, 0",t.canvas=this.canvas,t.draw()}_setAnchorPoint(){switch(this._setAspect(),this.#_anchor=this.center,this.anchor.type){case"center":this.anchor.x-=this.width/2,this.anchor.y-=this.height/2;break;case"top":this.anchor.x-=this.width/2;break;case"topRight":this.anchor.x-=this.width;break;case"right":this.anchor.x-=this.width,this.anchor.y-=this.height/2;break;case"bottomRight":this.anchor.x-=this.width,this.anchor.y-=this.height;break;case"bottom":this.anchor.x-=this.width/2,this.anchor.y-=this.height;break;case"bottomLeft":this.anchor.y-=this.height;break;case"left":this.anchor.y-=this.height/2}}_setAspect(){var t=(t,s)=>t<s?s-t:t-s;if(0<this.length)for(var s of this){var i=t(s.start.x,s.end.x),s=t(s.start.y,s.end.y);i>this.#_aspect.width&&(this.#_aspect.width=i),s>this.#_aspect.height&&(this.#_aspect.height=s)}else console.warn(`No ${this.constructor.name} exist to draw !`)}push(){for(let t=0;t<arguments.length;t++)arguments[t]instanceof Line?this.#_appendProperties(arguments[t]):console.error(`[ERROR] Argument ${t+1}, of type "${arguments[t].constructor.name}", is not a valid type !`);return Array.prototype.push.apply(this,arguments)}draw(){}}class Rectangles extends Array{_point=new Point;_canvas=void 0;_storage={type:Rectangle};constructor(t={x:void 0,y:void 0},s){super(),this.pushPop=UTILITIES.pushPop,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.combined.canvas),this.x=t.x,this.y=t.y,this.canvas=s}set x(t){this._point.x=t}get x(){return this._point.x}set y(t){this._point.y=t}get y(){return this._point.y}set canvas(t){}get canvas(){}_isInDom(t){return null!=document.getElementById(t)}pushPop(){}draw(t){if(null!=t&&(this.canvas=t),0<this.length)for(var s of this)s.x+=this.x,s.y+=this.y,s.draw();else console.warn(`No ${this.constructor.name} exist to draw !`)}}class Texts extends Array{_point=new Point;_canvas=void 0;_storage={type:Text};constructor(t={x:void 0,y:void 0},s){super(),this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this.pushPop=UTILITIES.pushPop,this.draw=UTILITIES.draw.typicalCollection,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.combined.canvas),this.point=t,this.canvas=s}set point(t){this._point=this._isPoint&&t}get point(){return this._point}set x(t){this._point.x=t}get x(){return this._point.x}set y(t){this._point.y=t}get y(){return this._point.y}set canvas(t){}get canvas(){}_isInDom(){}_isPoint(){}pushPop(){}draw(){}}class Animation{_timing=void 0;_draw=void 0;_duration=2e3;static#timings={easeInSine:t=>1-Math.cos(t*Math.PI/2),easeInCubic:t=>t*t*t,easeInQuint:t=>t*t*t*t*t,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI/3)),easeInQuad:t=>t*t,easeInQuart:t=>t*t*t*t,easeInExpo:t=>0===t?0:Math.pow(2,10*t-10),easeInBack:t=>2.70158*t*t*t-1.70158*t*t,easeOutSine:t=>Math.sin(t*Math.PI/2),easeOutCubic:t=>1-Math.pow(1-t,3),easeOutQuint:t=>1-Math.pow(1-t,5),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI/3))+1,easeOutQuad:t=>1-(1-t)*(1-t),easeOutQuart:t=>1-Math.pow(1-t,4),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeOutBack:t=>1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI/4.5)))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2+1,easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095)/2:(Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2};static#tools={};constructor(t,s,i){this._isNumber=VALIDATION.isNumber,this.timing=t,this.draw=s,this.duration=i}set timing(t){switch(typeof t){case"string":this._timing=null!=this.#timings[t]?this.#timings[t]:this._timing;break;case"function":this._timing=t;break;default:console.warn(`"${t}" is not a valid timing type !`)}}get timing(){return this._timing}set draw(t){this._draw="function"==typeof t?t:this._draw}get draw(){return this._draw}set duration(t){this._duration=this._isNumber(t)?t:this._duration}get duration(){return this._duration}_isNumber(){}animate(){if(null!=this._timing&&null!=this._draw){let e=performance.now(),[o,a,n]=[this._duration,this._timing,this._draw];requestAnimationFrame(function t(s){let i=(s-e)/o;1<i&&(i=1);s=a(i);n(s),i<1&&requestAnimationFrame(t)})}else console.warn('[ Animation ] :: The "timing" and/or "draw" function(s) are presently invalid !')}}class Application{#animations={id:0,cache:{}};constructor(){this._isInDom=VALIDATION.isInDom}#app={debug:!1,about:{Author:"Justin Don Byrne",Created:"October, 2 2023",Library:"Canvas Lab",Updated:"Nov, 26 2023",Version:"0.1.5",Copyright:"Copyright (c) 2023 Justin Don Byrne"}};#dom={canvases:void 0,contexts:{},window:{width:window.innerWidth-18,height:window.innerHeight-4,xCenter:window.innerWidth/2,yCenter:window.innerHeight/2},main:{canvas:void 0,context:void 0},mouse:{start:void 0,end:void 0,down:!1,extant:-1,offset:{x:0,y:0}}};#post={canvas:{state:void 0},line:{prior:{},cache:{}},redraw:{}};set canvas(t){var s=document.getElementsByTagName("canvas");if(void 0===this.#dom.canvases){this.#dom.canvases=new Object;for(var i of s)this.#dom.canvases[i.id]=document.getElementById(i.id),this.#dom.contexts[i.id]=document.getElementById(i.id).getContext("2d")}this._isInDom(t)?(this.#dom.main.canvas=this.#dom.canvases[t],this.#dom.main.context=this.#dom.contexts[t]):console.warn(`"${t}" does not exist !`)}get canvas(){return this.#dom.main.context}get about(){return this.#app.about}_isInDom(t){}setState(t){var s;this.#post.canvas.state=this._dom.canvases[t].toDataURL(),this.clear(t),this._isInDom("saved-state")?console.warn('"saved-state" does not exist !'):((s=document.createElement("img")).src=this.#post.canvas.state,s.id="saved-state",s.style="position: absolute",document.getElementById(t).parentNode.insertBefore(s,document.getElementById(t).nextElementSibling))}clear(t){this._dom.contexts[t].clearRect(0,0,this._dom.canvases[t].width,this._dom.canvases[t].height)}set animation(t={timing:timing,draw:draw,duration:duration}){t=new Animation(t.timing,t.draw,t.duration);t.animate(),this.#animations.cache[this.#animations.id++]=t}}let initCanvasLab=t=>{"function"==typeof canvasLab&&void 0===window.canvaslab&&(window.canvaslab=new canvasLab(t))};