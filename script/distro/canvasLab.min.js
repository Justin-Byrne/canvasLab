/** 
 * canvasLab - HTML5 canvas illustration "use strict" animation framework 
 * Copyright (C) 24  Justin D. Byrne 
 * 
 * This library is free software; you can redistribute it and/or 
 * modify it under the terms of the GNU Library General Public 
 * License as published by the Free Software Foundation; either 
 * version 2 of the License, or (at your option) any later version. 
 * 
 * This library is distributed in the hope that it will be useful, 
 * but WITHOUT ANY WARRANTY; without even the implied warranty of 
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU 
 * Library General Public License for more details. 
 * 
 * You should have received a copy of the GNU Library General Public 
 * License along with this library; if not, write to the 
 * Free Software Foundation, Inc., 51 Franklin St, Fifth Floor, 
 * Boston, MA  02110-1301, USA. 
 * 
 * Byrne-Systems, hereby disclaims all copyright interest in 
 * the library 'canvasLab' (HTML5 canvas illustration "use strict" animation framework) written 
 * by Justin D. Byrne. (justin@byrne-systems.com) 
 */ 

"use strict";const PROPERTY_BLOCKS={individual:{alpha:{set(t){this._alpha=t<=1&&0<=t?t:this._alpha},get(){return this._alpha}},area:{get(){return this.width*this.height}},canvas:{set(t){this._canvas=t?this._isInDom(t)?document.getElementById(t).getContext("2d"):console.warn(`"${t}" is not a valid DOM element !`):window.canvaslab.canvas?document.getElementById(window.canvaslab.canvas).getContext("2d"):this._canvas},get(){return null!=this._canvas?this._canvas.canvas.id:void 0}},center:{get(){var t=this.x-(this.x-this.anchor.x)+this.width/2,e=this.y-(this.y-this.anchor.y)+this.height/2;return new Point(t,e)}},master:{set(t){this._master=this._isCanvasLabObject(t)?t:this._master},get(){return this._master}},offset:{set(t){this._offset=this._isPoint(t)?t:this._offset},get(){return this._offset}},offsetX:{set(t){this._offset.x=t},get(){return this._offset.x}},offsetY:{set(t){this._offset.y=t},get(){return this._offset.y}},point:{set(t){this._point=this._isPoint(t)?new Point(t.x,t.y):this._point},get(){return this._point}},pointX:{set(t){this._point.x=t},get(){return this._point.x}},pointY:{set(t){this._point.y=t},get(){return this._point.y}},perimeter:{get(){return 2*this.area}},radius:{set(t){this._radius="number"==typeof t&&0<t?t:this._radius},get(){return this._radius}}},collection:{anchor:{set(t){this._anchor.type=this._isAnchor(t)?t:this._anchor.type,this._setAnchorPoint()},get(){return this._anchor}},area:{get(){return this.width*this.height}},aspect:{get(){return this._setAspect(),this._aspect}},aspectWidth:{get(){return this._aspect.width}},aspectHeight:{get(){return this._aspect.height}},canvas:{set(t){if(this._canvas=t?this._isInDom(t)?document.getElementById(t).getContext("2d"):this._isCanvasLabObject(t)?null:console.warn(`"${t}" is not a valid DOM element !`):document.getElementById(window.canvaslab.canvas).getContext("2d")?document.getElementById(window.canvaslab.canvas).getContext("2d"):this._canvas,0<this.length&&this._canvas instanceof CanvasRenderingContext2D)for(var e of this)e&&(e.canvas=this.canvas)},get(){return null!=this._canvas?this._canvas.canvas.id:void 0}},center:{get(){var[t,e]=[this.width/2,this.height/2];return new Point(t,e)}},endPoint:{get(){return this[this.length-1].point}},perimeter:{get(){return 2*this.area}},template:{set(t){this._isTemplate(t)&&([this._template,this._template._master]=[t,this],this._template.init(),this._setAllCanvases())},get(){return this._template}}},animation:{cache:{set(t){this._options.cache="boolean"==typeof t?t:this._options.cache},get(){return this._options.cache}},cancel:{get(){this._options.active=!1}},period:{set(t){this._period=this._isNumber(t)?t:this._period},get(){return this._period}},queue:{set(t){this._queue=t instanceof Queue?t:this._queue},get(){return this._queue}}}},UTILITIES={collection:{draw(t){if(null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D)if(0<this.length){this._setAnchorPoint();for(var e of this)this._setPointOffset(e),this._drawOptionsPre(e,this.options),e.draw();this._drawOptionsPost()}else console.warn(`No ${this.constructor.name} exist to draw !`);else console.warn(`'canvas' property is not set for ${this.constructor.name} !`)},drawAnchor(){var t=new Rectangle(new Point(this.x,this.y),new Aspect(5,5));t.fill.color=new Rgb(255,0,0),t.canvas=this.canvas,t.draw()},drawOptionsPost(){var t=new Aspect(this.width+20,this.height+20);this.options.border&&this._drawBorder(t),this.options.axis&&this._drawAxis(),this.options.anchor&&this._drawAnchor()},push(){for(let t=0;t<arguments.length;t++)arguments[t]instanceof this.storageType?Array.prototype.push.apply(this,[arguments[t]]):this._isPoint(arguments[t])||console.error(`[ERROR] Argument ${t+1}, of type "${arguments[t].constructor.name}", is not a valid type !`)},setAnchorPoint(){switch(this._setAspect(),this._anchor=this.center,this.anchor.type){case"center":this.anchor.x-=this.width/2,this.anchor.y-=this.height/2;break;case"top":this.anchor.x-=this.width/2;break;case"topRight":this.anchor.x-=this.width;break;case"right":this.anchor.x-=this.width,this.anchor.y-=this.height/2;break;case"bottomRight":this.anchor.x-=this.width,this.anchor.y-=this.height;break;case"bottom":this.anchor.x-=this.width/2,this.anchor.y-=this.height;break;case"bottomLeft":this.anchor.y-=this.height;break;case"left":this.anchor.y-=this.height/2}},setPointOffset(t){t.x+=this.x,t.y+=this.y}},individual:{color:{cycle:{stroke(t,e,i,s=1){this._stroke._color._cycle(t,e,i,s)},fill(t,e,i,s=1){this._fill.color._cycle(t,e,i,s)},gradient(t,e,i,s,o=1){this._fill.gradient.stopColorCycle(t,e,i,s,o)},stop(t,e,i,s,o){this.stops[s].color._cycle(t,e,i,o)}}},draw:{anchor(t=new Rgb(255,0,0)){var e=new Rectangle(new Point(this.x,this.y),new Aspect(5,5));e.fill.color=t,e.canvas=this.canvas,e.draw()},axis(t=20,e=new Rgb(245,80,50)){var i=new Lines;i.push(new Line,new Line),i.stroke.color=e,i.point=this.center,["Circles","Ellipses","Rectangles","RoundedRectangles","Texts"].includes(this.constructor.name)&&([i.point.x,i.point.y]=[i.point.x+this.aspect.offset.x,i.point.y+this.aspect.offset.y]),i.canvas=(this instanceof Point?this.options._master:this).canvas,i[0].start=new Point(-t,0),i[0].end=new Point(t,0),i[1].start=new Point(0,-t),i[1].end=new Point(0,t),i.draw()},border(t,e=new Rgb(245,80,50)){this._isAspect(t)?(t=new Rectangle(this.center,t),["Circles","Ellipses","Rectangles","RoundedRectangles","Texts"].includes(this.constructor.name)&&([t.x,t.y]=[t.x+this.aspect.offset.x,t.y+this.aspect.offset.y]),t.stroke.color=e,t.fill.color.alpha=0,t.canvas=(this instanceof Point?this.options._master:this).canvas,t.draw()):console.warn(`"${value}" is not a valid aspect !`)}},misc:{pushPop(t){let e=void 0;if(t instanceof this.storageType)if(null!=this._canvas&&(t.canvas=this.canvas),0!=this.length){for(var i in this)if(this[i]instanceof this.storageType){if(!this[i].isThere(t))break;e=i}null!=e?this.splice(e,1):this.push(t)}else this[0]=t;else console.warn(`${this.constructor.name} only accepts '${this.storageType.name}' objects !`)},move(t,e){t=this._rotatePoint({x:this.x,y:this.y},t,e);[this.x,this.y]=[t.x,t.y]},rotate(t){var e,i;this._isDegree(t)&&([e,i]=[this.x,this.y],this._canvas.save(),this._canvas.translate(e,i),this._canvas.rotate(t*Math.PI/180),this._canvas.translate(-e,-i))},rotatePoint(t={x:x,y:y},e,i){var s=new Point,e=e%360;return s.x=t.x-Math.cos(e*Math.PI/180)*i,s.y=t.y-Math.sin(e*Math.PI/180)*i,s},showCoordinates(t=10,e=16){var i=new Text(this.point,`( ${this.x}, ${this.y} )`);i.canvas=this.canvas,i.size=e,i.options.shadow=!1,i.offset.y=t/2,i.options.shadow=!0,i.shadow.color=new Rgb(255,255,255),i.shadow.blur=1,i.shadow.x=i.shadow.y=1,i.draw()}},set:{all(t,e){var i=this.constructor.name.replace("Collection","").toLowerCase();if(this["_"+t]=e,0<this._master.length)for(var s of this._master)s[i][t]=e},anchorPoint(){switch([this._anchor.x,this._anchor.y]=[this.x,this.y],this.anchor.align){case"center":this.anchor.x-=this.width/2,this.anchor.y-=this.height/2;break;case"top":this.anchor.x-=this.width/2;break;case"topRight":this.anchor.x-=this.width;break;case"right":this.anchor.x-=this.width,this.anchor.y-=this.height/2;break;case"bottomRight":this.anchor.x-=this.width,this.anchor.y-=this.height;break;case"bottom":this.anchor.x-=this.width/2,this.anchor.y-=this.height;break;case"bottomLeft":this.anchor.y-=this.height;break;case"left":this.anchor.y-=this.height/2}},shadow(){this._canvas.shadowBlur=this._shadow.blur,this._canvas.shadowOffsetX=this._shadow.x,this._canvas.shadowOffsetY=this._shadow.y,this._canvas.shadowColor=this._shadow.color.toCss()},fillType(){function t(t,e){for(var i of e)t.addColorStop(i.offset,i.color.toCss());return t}switch(this.fill.type){case"solid":this._canvas.fillStyle=this.fill.color.toCss();break;case"linear":var e=this._canvas.createLinearGradient(this.fill.gradient.start.x,this.fill.gradient.start.y,this.fill.gradient.end.x,this.fill.gradient.end.y);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"radial":e=this._canvas.createRadialGradient(this.fill.gradient.start.x,this.fill.gradient.start.y,this.fill.gradient.startRadius,this.fill.gradient.end.x,this.fill.gradient.end.y,this.fill.gradient.endRadius);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"conic":e=this._canvas.createConicGradient(this.fill.gradient.angle,this.fill.gradient.point.y,this.fill.gradient.point.x);this._canvas.fillStyle=t(e,this.fill.gradient.stops);break;case"pattern":this.fill._pattern.onload=()=>{this._canvas.fillStyle=this._canvas.createPattern(this.fill.pattern,this.fill.repetition),this._canvas.fill()}}}}},animation:{end(){var t=requestAnimationFrame(this.animate);cancelAnimationFrame(t)},getInvertedAngle(t){return(t+180)%360}}},VALIDATION={is256(t){return"number"==typeof t&&0<=t&&t<=255},isAnchor(t){var e;for(e of["center","top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"])if(t===e)return!0;return!1},isAngle(t){return t instanceof Angle||"number"==typeof t&&t<=360},isAlign(t){var e;for(e of["center","top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft","start","end"])if(t===e)return!0;return!1},isAlpha(t){return"number"==typeof t&&0<=t&&t<=1},isAspect(t){var e,i;return t instanceof Aspect||(e=2==Object.keys(t).length,i=!!t.hasOwnProperty("width")&&"number"==typeof t.width,t=!!t.hasOwnProperty("height")&&"number"==typeof t.height,i&&t&&e)},isBlur(t){return"number"==typeof t&&0<=t},isCanvasLabObject(t){var e;for(e of[Group,Line,Lines,Circle,Circles,Ellipse,Ellipses,Rectangle,Rectangles,RoundedRectangle,Text,Texts,cImage])if(t instanceof e)return!0;return!1},isColorName(t){return{A:["aliceblue","antiquewhite","aqua","aquamarine","azure"],B:["beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood"],C:["cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan"],D:["darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue"],E:[],F:["firebrick","floralwhite","forestgreen","fuchsia"],G:["gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow"],H:["honeydew","hotpink"],I:["indianred","indigo","ivory"],J:[],K:["khaki"],L:["lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen"],M:["magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin"],N:["navajowhite","navy","navyblue"],O:["oldlace","olive","olivedrab","orange","orangered","orchid"],P:["palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple"],Q:[],R:["red","rosybrown","royalblue"],S:["saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue"],T:["tan","teal","thistle","tomato","turquoise"],U:[],V:["violet"],W:["wheat","white","whitesmoke"],X:[],Y:["yellow","yellowgreen"],Z:[]}[t[0].toUpperCase()].includes(t)},isColorModel(t){return t instanceof Rgb},isControlPoint(t){let e=!1;if(Array.isArray(t)&&4===t.length){for(var i of t)if("number"!=typeof i)return e;e=!0}return e},isDecimal(t){return"number"==typeof t&&0<=t&&t<=1},isDegree(t){return"number"==typeof t&&t<=360},isFillType(t){return["solid","linear","radial","conic","pattern"].includes(t)},isGradient(t){return t instanceof Linear||t instanceof Radial||t instanceof Conic},isInDom(t){return null!=document.getElementById(t)},isNumber(t){return"number"==typeof t&&!isNaN(t)},isPoint(t){var e,i;return t instanceof Point||(e=2==Object.keys(t).length,i=!!t.hasOwnProperty("x")&&"number"==typeof t.x,t=!!t.hasOwnProperty("y")&&"number"==typeof t.y,e&&i&&t)},isPointNAspect(t){let e=void 0,i=void 0;return"object"==typeof t&&2==Object.keys(t).length&&(e=!!t.hasOwnProperty("point")&&this._isPoint(t.point),i=!!t.hasOwnProperty("aspect")&&this._isAspect(t.aspect)),e&&i},isRadian(t){return"number"==typeof t&&0<=t&&t<=6.283185307179586},isRadius(t){return"number"==typeof t&&0<t},isRepetition(t){return["repeat","repeat-x","repeat-y","no-repeat"].includes(t)},isSegments(t){return!!Array.isArray(t)&&function(t){let e=void 0;for(var i of t)if(0==(e="number"==typeof i))break;return e}(t)},isStop(t){var e,i;return t instanceof Stop||(e="object"==typeof t&&!Array.isArray(t),i=!!t.hasOwnProperty("offset")&&VALIDATION.isNumber(t.offset),t=!!t.hasOwnProperty("color")&&VALIDATION.isColorModel(t.color),e&&i&&t)},isStrokeType(t){return"string"==typeof t&&["solid","dashed"].includes(t)},isTemplate(value){function _getClassFunctions(s){let t=new Array,e=s;for(;t.push(...Object.getOwnPropertyNames(e)),e=Object.getPrototypeOf(e););return t=t.sort().filter((t,e,i)=>{if(t!=i[e+1]&&"function"==typeof s[t])return!0})}if(null==value)return!1;{let _instance=eval(`new ${value.constructor.name};`),_functions=_getClassFunctions(value),_point=Object.hasOwn(_instance,"_point"),_master=Object.hasOwn(_instance,"_master"),_init=_functions.includes("init");return _point&&_master&&_init}},isWidth(t){return"number"==typeof t&&0<=t}};class canvasLab{_canvas=void 0;_canvases=void 0;_font=void 0;_rotation=0;#application=new Application;constructor(t){this._isInDom=VALIDATION.isInDom,this._init(),this.canvas=t}set canvas(t){this._canvas=this._isInDom(t)?document.getElementById(t).getContext("2d"):this._canvas}get canvas(){return this._canvas.canvas.id}set canvases(t){t=this._isInDom(t)?document.getElementById(t).getContext("2d"):void 0;null==this._canvases&&(this._canvases=new Array),null!=t&&this._canvases.push(t)}get canvases(){return this._canvases}set font(t){this._font="string"==typeof t?t:this._font}get font(){return this._canvas.font}set rotation(t){this._rotation=t}get rotation(){return this._rotation}get application(){return this.#application}get dom(){return this.#application.dom}_isInDom(){}get center(){return new Point(this._canvas.canvas.clientWidth/2,this._canvas.canvas.clientHeight/2)}clearCanvas(){var t=document.getElementById(this.canvas);t&&this._canvas.clearRect(0,0,t.width,t.height)}animate(t={object:object,timing:timing,period:period,change:change}){t&&(this.#application.animation=t)}_init(){var t=document.getElementsByTagName("canvas");if("object"==typeof t&&void 0===this._canvases)for(var e in t)0==e?this.canvas=t[e].id:this.canvases=t[e].id}}class Rgb{_red=0;_green=0;_blue=0;_alpha=1;constructor(t,e,i,s){this._is256=VALIDATION.is256,Object.defineProperty(this,"alpha",PROPERTY_BLOCKS.individual.alpha),this.red=t,this.green=e,this.blue=i,this.alpha=void 0===s?1:s}set red(t){this._red=this._is256(t)?Math.round(t):this._red}get red(){return this._red}set green(t){this._green=this._is256(t)?Math.round(t):this._green}get green(){return this._green}set blue(t){this._blue=this._is256(t)?Math.round(t):this._blue}get blue(){return this._blue}set alpha(t){}get alpha(){}_is256(){}_lerp(t,e,i,s){return Math.round(t+(e-t)*i/s)}_lerpRgb(t,e,i,s){this._red=this._lerp(t.red,e.red,i,s),this._green=this._lerp(t.green,e.green,i,s),this._blue=this._lerp(t.blue,e.blue,i,s)}cycle(t,e,i,s){this._lerpRgb(t,e,i,s)}toCss(){return`rgb(${this.red} ${this.green} ${this.blue} / ${100*this.alpha}%)`}}class Options{_anchor=!1;_axis=!1;_border=!1;_coordinates=!1;_controlPoints=!1;_points=!1;_shadow=!1;_master=void 0;constructor(t,e,i,s,o,n,r){this._isCanvasLabObject=VALIDATION.isCanvasLabObject,Object.defineProperty(this,"master",PROPERTY_BLOCKS.individual.master),this.axis=e,this.anchor=t,this.border=i,this.coordinates=s,this.controlPoints=o,this.points=n,this.shadow=r}set anchor(t){this._anchor="boolean"==typeof t?t:this._anchor}get anchor(){return this._anchor}set axis(t){this._axis="boolean"==typeof t?t:this._axis}get axis(){return this._axis}set border(t){this._border="boolean"==typeof t?t:this._border}get border(){return this._border}set coordinates(t){this._coordinates="boolean"==typeof t?t:this._coordinates}get coordinates(){return this._coordinates}set controlPoints(t){this._controlPoints="boolean"==typeof t?t:this._controlPoints}get controlPoints(){return this._controlPoints}set shadow(t){this._shadow="boolean"==typeof t?t:this._shadow}get shadow(){return this._shadow}set master(t){}get master(){}_isCanvasLabObject(){}}class Anchor{_point=new Point;_align="center";constructor(){this._isAlign=VALIDATION.isAlign,Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY)}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set align(t){this._align=this._isAlign(t)?t:this._align}get align(){return this._align}_isAnchor(){}}class Angle{_start=0;_end=360;_clockwise=!0;constructor(t,e,i){this._isDegree=VALIDATION.isDegree,this._isRadian=VALIDATION.isRadian,this.start=t,this.end=e,this.clockwise=i}set start(t){this._start=this._isDegree(t)?t:this._start}get start(){return this._start}set end(t){this._end=this._isDegree(t)?t:this._end}get end(){return this._end}set clockwise(t){this._clockwise="boolean"==typeof t?t:this._clockwise}get clockwise(){return this._clockwise}_isDegree(){}_isRadian(){}_convert2Degree(t){return this._isRadian?t*(Math.PI/180):console.warn(t+" is not a radian value !")}_convert2Radian(t){return this._isDegree?t*(Math.PI/180):console.warn(t+" is not a degree value !")}get startInRadians(){return this._convert2Radian(this.start)}get endInRadians(){return this._convert2Radian(this.end)}}class Aspect{_width=0;_height=0;#offset=new Point;constructor(t,e){this._isPoint=VALIDATION.isPoint,this.width=t,this.height=e}set width(t){this._width="number"==typeof t&&0<t?t:this._width}get width(){return this._width}set height(t){this._height="number"==typeof t&&0<t?t:this._height}get height(){return this._height}get offset(){return this.#offset}_isPoint(){}get center(){return new Point(this.widthCenter,this.heightCenter)}get heightCenter(){return this.height/2}get widthCenter(){return this.width/2}}class ControlPoints{_p0=0;_p1=0;_p2=0;_p3=0;constructor(t,e,i,s){this._isNumber=VALIDATION.isNumber,this._isControlPoint=VALIDATION.isControlPoint,this.p0=t,this.p1=e,this.p2=i,this.p3=s}set p0(t){this._p0=this._isNumber(t)?t:this._p0}get p0(){return this._p0}set p1(t){this._p1=this._isNumber(t)?t:this._p1}get p1(){return this._p1}set p2(t){this._p2=this._isNumber(t)?t:this._p2}get p2(){return this._p2}set p3(t){this._p3=this._isNumber(t)?t:this._p3}get p3(){return this._p3}set points(t){this._isControlPoint(t)&&([this.p0,this.p1,this.p2,this.p3]=[t[0],t[1],t[2],t[3]])}get points(){return[this.p0,this.p1,this.p2,this.p3]}_isControlPoint(){}_isNumber(){}}class Font{_type=void 0;_size=24;_weight="normal";_maxWidth=void 0;_offset=new Point;#_options={weight:["normal","bold","italic"]};set type(t){var e;this._type="string"==typeof t?t:this._type,void 0===t&&(window.canvaslab instanceof canvasLab?(t=/(\w+(\s))?(?<size>\d+)px\s(?<type>\w.+)/,e=canvaslab.font,this._type=t.test(e)?t.exec(e).groups.type:this._type):console.warn("canvaslab is not instantiated !"))}get type(){return this._type}set size(t){this._size="number"==typeof t?t:this._size}get size(){return this._size}set weight(t){var e,i=this._weight;for(e of this.#_options.weight)if(this._weight=t==e?t:this._weight,this._weight!=i)break}get weight(){return this._weight}set maxWidth(t){this._maxWidth="number"==typeof t?t:this._maxWidth}get maxWidth(){return this._maxWidth}get offset(){return this._offset}set font(t){this.font=/(\w+(-\w+?)?|[1-9][0][0]?)(\s?)\d{1,3}px\s\w.+/.test(t)?t:this.font}get font(){return`${this._weight} ${this._size}px `+this._type}}class Point{_x=0;_y=0;_canvas=void 0;#_options=new Options;constructor(t,e){this._isAspect=VALIDATION.isAspect,this._isInDom=VALIDATION.isInDom,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._rotatePoint=UTILITIES.individual.misc.rotatePoint,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),delete this.#_options._shadow,delete this.#_options._border,this.x=t,this.y=e}set x(t){this._x="number"!=typeof t||isNaN(t)?this._x:t}get x(){return this._x}set y(t){this._y="number"!=typeof t||isNaN(t)?this._y:t}get y(){return this._y}set canvas(t){}get canvas(){}get options(){return this.#_options}get center(){return new Point(this.x,this.y)}_isAspect(){}_isInDom(){}_drawAxis(){}_drawBorder(){}_rotatePoint(){}drawOptions(t=20){t=new Aspect(t,t);this._drawBorder(t),this._drawAxis()}invert(){var t=this.y;[this.y,this.x]=[this.x,t]}move(t,e){t=this._rotatePoint({x:this.x,y:this.y},t,e);[this.x,this.y]=[t.x,t.y]}}class Stop{_color=new Rgb;_offset=void 0;constructor(t,e){this._isColorModel=VALIDATION.isColorModel,this._isDecimal=VALIDATION.isDecimal,this.color=t,this.offset=e}set color(t){this._color=this._isColorModel(t)?t:this._color}get color(){return this._color}set offset(t){this._offset=this._isDecimal(t)?t:this._offset}get offset(){return this._offset}_isColorModel(){}_isDecimal(){}}class Conic{_point=new Point;_angle=0;_stops=new Array;constructor(t,e,i){this._isPoint=VALIDATION.isPoint,this._isRadian=VALIDATION.isRadian,this._isStop=VALIDATION.isStop,this._stopColorCycle=UTILITIES.individual.color.cycle.stop,this.point=e,this.angle=t,this.stops=i}set angle(t){this._angle=this._isRadian(t)?t:this._angle}get angle(){return this._angle}set point(t){this._point=this._isPoint(t)?t:this._point}get point(){return this._point}set stops(t){if(Array.isArray(t))for(var e of t)this._isStop(e)?this._stops.push(e):console.warn("[ ERROR ]: value is not of type Array !")}get stops(){return this._stops}_isPoint(){}_isRadian(){}_isStop(){}_stopColorCycle(){}}class Linear{_start=new Point;_end=new Point;_stops=new Array;constructor(t,e,i){this._isColorModel=VALIDATION.isColorModel,this._isPoint=VALIDATION.isPoint,this._isStop=VALIDATION.isStop,this._stopColorCycle=UTILITIES.individual.color.cycle.stop,this.start=t,this.end=e,this.stops=i}set start(t){this._start=this._isPoint(t)?t:this._start}get start(){return this._start}set end(t){this._end=this._isPoint(t)?t:this._end}get end(){return this._end}set stops(t){if(Array.isArray(t))for(var e of t)this._isStop(e)?this._stops.push(e):console.warn("[ ERROR ]: value is not of type Array !")}get stops(){return this._stops}_isColorModel(){}_isPoint(){}_isStop(){}stopColorCycle(){}}class Radial{_start=new Point;_startRadius=0;_end=new Point;_endRadius=0;_stops=new Array;constructor(t,e,i,s,o){this._isPoint=VALIDATION.isPoint,this._isStop=VALIDATION.isStop,this._isColorModel=VALIDATION.isColorModel,this._isRadius=VALIDATION.isRadius,this._stopColorCycle=UTILITIES.individual.color.cycle.stop,this.start=t,this.startRadius=e,this.end=i,this.endRadius=s,this.stops=o}set start(t){this._start=this._isPoint(t)?t:this._start}get start(){return this._start}set startRadius(t){this._startRadius=this._isRadius(t)?t:this._startRadius}get startRadius(){return this._startRadius}set end(t){this._end=this._isPoint(t)?t:this._end}get end(){return this._end}set endRadius(t){this._endRadius=this._isRadius(t)?t:this._endRadius}get endRadius(){return this._endRadius}set stops(t){if(Array.isArray(t))for(var e of t)this._isStop(e)?this._stops.push(e):console.warn("[ ERROR ]: value is not of type Array !")}get stops(){return this._stops}_isColorModel(){}_isPoint(){}_isRadius(){}_isStop(){}_stopColorCycle(){}}class Fill{_color=new Rgb(0,0,0,0);_type="solid";_gradient=void 0;_pattern=void 0;_repetition="repeat";constructor(t,e,i){this._isColorModel=VALIDATION.isColorModel,this._isGradient=VALIDATION.isGradient,this._isFillType=VALIDATION.isFillType,this._isRepetition=VALIDATION.isRepetition,this.color=t,this.type=e,this.gradient=i}set color(t){this._color=this._isColorModel(t)?t:this._color}get color(){return this._color}set type(t){this._type=this._isFillType(t)?t:this._type}get type(){return this._type}set gradient(t){this._gradient=this._isGradient(t)?t:this._gradient,this._type=this._isGradient(t)?t.constructor.name.toLowerCase():this._type}get gradient(){return this._gradient}set pattern(t){var e;"string"==typeof t&&((e=new Image).src=t,this._pattern=e,this.type="pattern")}get pattern(){return this._pattern}set repetition(t){this._repetition=this._isRepetition(t)?t:this._repetition}get repetition(){return this._repetition}_isColorModel(){}_isGradient(){}_isFillType(){}_isRepetition(){}}class Shadow{_color=new Rgb;_blur=3;_offset=new Point;constructor(t,e,i={x:void 0,y:void 0}){this._isColorModel=VALIDATION.isColorModel,this._isBlur=VALIDATION.isBlur,this._isPoint=VALIDATION.isPoint,Object.defineProperty(this,"offset",PROPERTY_BLOCKS.individual.offset),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.offsetX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.offsetY),this.color=t,this.blur=e,this.offset=i}set color(t){this._color=this._isColorModel(t)?t:this._color}get color(){return this._color}set blur(t){this._blur=this._isBlur(t)?t:this._blur}get blur(){return this._blur}set offset(t){}get offset(){}set x(t){}get x(){}set y(t){}get y(){}_isColorModel(){}_isBlur(){}_isPoint(){}}class Stroke{_color=new Rgb;_type="solid";_segments=[5,5];_width=1;constructor(t,e,i,s){this._isColorModel=VALIDATION.isColorModel,this._isStrokeType=VALIDATION.isStrokeType,this._isSegments=VALIDATION.isSegments,this._isWidth=VALIDATION.isWidth,this.color=t,this.type=e,this.segments=i,this.width=s}set type(t){this._type=this._isStrokeType(t)?t:this._type}get type(){return this._type}set segments(t){this._segments=this._isSegments(t)?t:this._segments}get segments(){return this._segments}set color(t){this._color=this._isColorModel(t)?t:this._color}get color(){return this._color}set width(t){this._width=this._isWidth(t)?t:this._width}get width(){return this._width}_isColorModel(){}_isSegments(){}_isStrokeType(){}_isWidth(){}}class OptionsCollection{_shadow=!1;_border=!1;_axis=!1;_points=!1;_coordinates=!1;_controlPoints=!1;constructor(t,e,i,s,o){this._setAll=UTILITIES.individual.set.all,this.shadow=t,this.border=e,this.axis=i,this.points=s,this.coordinates=o}set shadow(t){"boolean"==typeof t&&this._setAll("shadow",t)}get shadow(){return this._shadow}set border(t){"boolean"==typeof t&&this._setAll("border",t)}get border(){return this._border}set axis(t){"boolean"==typeof t&&this._setAll("axis",t)}get axis(){return this._axis}set coordinates(t){"boolean"==typeof t&&this._setAll("coordinates",t)}get coordinates(){return this._coordinates}set controlPoints(t){"boolean"==typeof t&&this._setAll("controlPoints",t)}get controlPoints(){return this._controlPoints}_setAll(){}}class PointCollection{_x=0;_y=0;#_options=new OptionsCollection;constructor(){this._setAll=UTILITIES.individual.set.all,delete this.#_options._shadow,delete this.#_options._border}set x(t){"number"==typeof t&&this._setAll("x",t)}get x(){return this._x}set y(t){"number"==typeof t&&this._setAll("y",t)}get y(){return this._y}get options(){return this.#_options}_setAll(){}invert(){var t=this.y;[this.y,this.x]=[this.x,t]}}class ShadowCollection{_color=new Rgb;_blur=3;_offset=new Point;constructor(){this._isColorModel=VALIDATION.isColorModel,this._isBlur=VALIDATION.isBlur,this._isPoint=VALIDATION.isPoint,this._setAll=UTILITIES.individual.set.all}set color(t){this._isColorModel(t)&&this._setAll("color",t)}get color(){return this._color}set blur(t){this._isBlur(t)&&this._setAll("blur",t)}get blur(){return this._blur}set offset(t){this._isPoint(t)&&this._setAll("offset",t)}get offset(){return this._offset}set x(t){this._offset.x=t}get x(){return this._offset.x}set y(t){this._offset.y=t}get y(){return this._offset.y}_isBlur(){}_isPoint(){}_setAll(){}}class StrokeCollection{_color=new Rgb;_type="solid";_segments=[5,5];_width=2;_master=void 0;constructor(){this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isColorModel=VALIDATION.isColorModel,this._isStrokeType=VALIDATION.isStrokeType,this._isSegments=VALIDATION.isSegments,this._isWidth=VALIDATION.isWidth,this._setAll=UTILITIES.individual.set.all,Object.defineProperty(this,"master",PROPERTY_BLOCKS.individual.master)}set color(t){this._isColorModel(t)&&this._setAll("color",t)}get color(){return this._color}set type(t){this._isStrokeType(t)&&this._setAll("type",t)}get type(){return this._type}set segments(t){this._isSegments(t)&&this._setAll("segments",t)}get segments(){return this._segments}set width(t){this._isWidth(t)&&this._setAll("width",t)}get width(){return this._width}set master(t){}get master(){}_isColorModel(){}_isSegments(){}_isStrokeType(){}_isWidth(){}_setAll(){}}class Position{_origin=void 0;_start=void 0;_end=void 0;_distance=void 0;_direction=void 0;_rotation=0;_aspect=new Aspect;_controlPoints=new ControlPoints;_fontSize=0;_master=void 0;constructor(t,e,i){this._isAspect=VALIDATION.isAspect,this._isBlur=VALIDATION.isBlur,this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isControlPoint=VALIDATION.isControlPoint,this._isNumber=VALIDATION.isNumber,this._isPoint=VALIDATION.isPoint,this._isWidth=VALIDATION.isWidth,this._isHeight=VALIDATION.isHeight,Object.defineProperty(this,"master",PROPERTY_BLOCKS.individual.master),this.origin=t,this.distance=e,this.direction=i}set origin(t){this._origin=t}get origin(){return this._origin}set distance(t){null!=t&&this._isPoint(t)&&(this._distance=Math.sqrt(Math.pow(t.x-this.master.x,2)+Math.pow(t.y-this.master.y,2)))}get distance(){return this._distance}set direction(t){null!=t&&this._isPoint(t)&&(this._direction=Math.atan2(t.y-this.master.y,t.x-this.master.x))}get direction(){return this._direction}set rotation(t){this._rotation=t}get rotation(){return this._rotation}set aspect(t){this._aspect=this._isAspect(t)?t:this._aspect}get aspect(){return this._aspect}set width(t){this._aspect.width=t}get width(){return this._aspect.width}set height(t){this._aspect.height=t}get height(){return this._aspect.height}set controlPoints(t){this._controlPoints=this._isControlPoint(t)?t:this._controlPoints}get controlPoints(){return this._controlPoints}set fontSize(t){this._fontSize=this._isNumber(t)?t:this._fontSize}get fontSize(){return this._fontSize}set master(t){}get master(){}_isAspect(){}_isBlur(){}_isCanvasLabObject(){}_isControlPoint(){}_isNumber(){}_isPoint(){}_isWidth(){}_isHeight(){}}class Circle{_point=new Point;_radius=25;_angle=new Angle;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_canvas=void 0;_anchor=new Anchor;#options=new Options;#position=new Position;constructor(t={x:void 0,y:void 0},e,i={start:void 0,end:void 0,clockwise:void 0},s={color:void 0,type:void 0,segments:void 0,width:void 0},o={color:void 0,type:void 0},n={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},r=void 0){this._isAspect=VALIDATION.isAspect,this._isAnchor=VALIDATION.isAnchor,this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isNumber=VALIDATION.isNumber,this._isPoint=VALIDATION.isPoint,this._drawAnchor=UTILITIES.individual.draw.anchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._rotatePoint=UTILITIES.individual.misc.rotatePoint,this._setFillType=UTILITIES.individual.set.fillType,this._setShadow=UTILITIES.individual.set.shadow,this.move=UTILITIES.individual.misc.move,this.rotate=UTILITIES.individual.misc.rotate,this.showCoordinates=UTILITIES.individual.misc.showCoordinates,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),delete this.#options._controlPoints,delete this.#options._points,delete this.#options._master,this.point=t,this.radius=e,this._angle=new Angle(i.start,i.end,i.clockwise),this._stroke=new Stroke(s.color,s.type,s.segments,s.width),this._fill=new Fill(o.color,o.type),this._shadow=new Shadow(n.color,n.blur,{x:n.offset.x,y:n.offset.y}),this.canvas=r,this.#options.shadow=null!=n.offset.x&&null!=n.offset.y,this.#position.master=this}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set radius(t){t&&(this._radius=this._isNumber(t)?t:this._radius,this._radius=this._isPoint(t)?t:this._radius)}get radius(){return this._radius}get angle(){return this._angle}get stroke(){return this._stroke}get fill(){return this._fill}get shadow(){return this._shadow}set canvas(t){}get canvas(){}get anchor(){return this._anchor}get options(){return this.#options}get position(){return this.#position}_isAnchor(){}_isAspect(){}_isDegree(){}_isInDom(){}_isNumber(){}_isPoint(){}isThere(t){if(t instanceof this.constructor)return this.point.x==t.point.x&&this.point.y==t.point.y&&this.radius==t.radius;console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name)}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptions(){var t=this._isPoint(this.radius)?new Aspect(2*this.radius.x+20,2*this.radius.y+20):new Aspect(2*this.radius+20,2*this.radius+20);this.#options.border&&this._drawBorder(t),this.#options.axis&&this._drawAxis(20),this.#options.anchor&&this._drawAnchor(),this.#options.coordinates&&this.showCoordinates()}_rotatePoint(){}_setAnchorPoint(){if([this._anchor.x,this._anchor.y]=[this.x,this.y],this._isPoint(this.radius))switch(this.anchor.align){case"center":break;case"top":this.anchor.y+=this.radius.y;break;case"topRight":this.anchor.x-=this.radius.x,this.anchor.y+=this.radius.y;break;case"right":this.anchor.x-=this.radius.x;break;case"bottomRight":this.anchor.x-=this.radius.x,this.anchor.y-=this.radius.y;break;case"bottom":this.anchor.y-=this.radius.y;break;case"bottomLeft":this.anchor.x+=this.radius.x,this.anchor.y-=this.radius.y;break;case"left":this.anchor.x+=this.radius.x;break;case"topLeft":this.anchor.x+=this.radius.x,this.anchor.y+=this.radius.y}else switch(this.anchor.align){case"center":break;case"top":this.anchor.y+=this.radius;break;case"topRight":this.anchor.x-=this.radius,this.anchor.y+=this.radius;break;case"right":this.anchor.x-=this.radius;break;case"bottomRight":this.anchor.x-=this.radius,this.anchor.y-=this.radius;break;case"bottom":this.anchor.y-=this.radius;break;case"bottomLeft":this.anchor.x+=this.radius,this.anchor.y-=this.radius;break;case"left":this.anchor.x+=this.radius;break;case"topLeft":this.anchor.x+=this.radius,this.anchor.y+=this.radius}}_setFillType(){}_setShadow(){}get area(){return Math.PI*Math.pow(this.radius,2)}get diameter(){return 2*this.radius}get center(){this._setAnchorPoint();var t=this.x-(this.x-this.anchor.x),e=this.y-(this.y-this.anchor.y);return new Point(t,e)}get circumference(){return Math.PI*this.diameter()}rotate(){}showCoordinates(){}draw(t){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this._setAnchorPoint(),this.#options.shadow&&this._setShadow(),this._canvas.strokeStyle=this.stroke.color.toCss(),this._setFillType(),this._canvas.lineWidth=this.stroke.width,this._canvas.setLineDash("solid"===this.stroke.type?new Array:this.stroke.segments),this._canvas.beginPath(),this._isPoint(this.radius)?this._canvas.ellipse(this.anchor.x,this.anchor.y,this.radius.x,this.radius.y,0,this.angle.startInRadians,this.angle.endInRadians,!this.angle.clockwise):this._canvas.arc(this.anchor.x,this.anchor.y,this.radius,this.angle.startInRadians,this.angle.endInRadians,!this.angle.clockwise),this._canvas.stroke(),"pattern"!=this.fill.type&&this._canvas.fill(),this.#options.shadow&&(this._canvas.shadowColor=new Rgb(0,0,0,0).toCss()),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class Ellipse extends Circle{_radius=new Point(20,30);_anchor=new Anchor;set radius(t){this._radius=t&&this._isPoint(t)?t:this._radius}get radius(){return this._radius}}class Line{_start=new Point;_end=new Point;_stroke=new Stroke;_shadow=new Shadow;_lineCap="round";_canvas=void 0;_anchor=new Anchor;#options=new Options;#position=new Position;#controlPoints=new ControlPoints;constructor(t={x:void 0,y:void 0},e={x:void 0,y:void 0},i={color:void 0,type:void 0,segments:void 0,width:void 0},s={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},o=void 0,n){var r;this._isAspect=VALIDATION.isAspect,this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isNumber=VALIDATION.isNumber,this._isPoint=VALIDATION.isPoint,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._rotatePoint=UTILITIES.individual.misc.rotatePoint,this._setShadow=UTILITIES.individual.set.shadow,this.rotate=UTILITIES.individual.misc.rotate,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),null!=t&&(this._isPoint(t)&&([this.start.x,this.end.x]=[t.x,e.x]),this._isNumber(t))&&(this.start.y=e.y-(r=t/2),this.end.y=e.y+r,this.start.x=this.end.x=e.x),null!=e&&(this._isPoint(e)&&([this.start.y,this.end.y]=[t.y,e.y]),this._isNumber(e))&&(this.start.x=t.x-(r=e/2),this.end.x=t.x+r,this.start.y=this.end.y=t.y),this._stroke=new Stroke(i.color,i.type,i.segments,i.width),this._shadow=new Shadow(s.color,s.blur,{x:s.offset.x,y:s.offset.y}),this.lineCap=o,this.canvas=n,this.#options.shadow=null!=s.offset.x&&null!=s.offset.y,((this.#options.master=this)._start.options.master=this)._end.options.master=this,Object.defineProperty(this.#options,"points",{set(t){this._points="boolean"==typeof t?t:this.#options.points,this._master._start.options.points=t,this._master._end.options.points=t},get(){return this._points}}),this.#position.master=this}set start(t){this._start=this._isPoint(t)?t:this._start}get start(){return this._start}set end(t){this._end=this._isPoint(t)?t:this._end}get end(){return this._end}get stroke(){return this._stroke}get shadow(){return this._shadow}set lineCap(t){this._lineCap="butt"===t||"round"===t||"square"===t?t:this._lineCap}get lineCap(){return this._lineCap}set canvas(t){}get canvas(){}get anchor(){return this._anchor}get options(){return this.#options}get position(){return this.#position}get controlPoints(){return this.#controlPoints}set point(t){var e=this.center.x>t.x,i=this.center.y>t.y,s=e?this.center.x-t.x:t.x-this.center.x,t=i?this.center.y-t.y:t.y-this.center.y;[this.start.x,this.end.x]=e?[this.start.x-s,this.end.x-s]:[this.start.x+s,this.end.x+s],[this.start.y,this.end.y]=i?[this.start.y-t,this.end.y-t]:[this.start.y+t,this.end.y+t]}get point(){return this.center}set x(t){var e=this.center.x>t,t=e?this.center.x-t:t-this.center.x;[this.start.x,this.end.x]=e?[this.start.x-t,this.end.x-t]:[this.start.x+t,this.end.x+t]}get x(){return this.center.x}set y(t){var e=this.center.y>t,t=e?this.center.y-t:t-this.center.y;[this.start.y,this.end.y]=e?[this.start.y-t,this.end.y-t]:[this.start.y+t,this.end.y+t]}get y(){return this.center.y}_isAspect(){}_isDegree(){}_isInDom(){}_isNumber(){}_isPoint(){}isThere(t){var e,i,s,o;if(t instanceof this.constructor)return e=this.start.x+" "+this.start.y,i=this.end.x+" "+this.end.y,s=t.start.x+" "+t.start.y,o=t.end.x+" "+t.end.y,e==s&&i==o||e==o&&i==s;console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name)}_drawAnchor(){let t=void 0;var e=new Aspect(5,5);switch(this.anchor.align){case"center":t=new Point(this.x,this.y);break;case"start":t=new Point(this.start.x,this.start.y);break;case"end":t=new Point(this.end.x,this.end.y)}e=new Rectangle(t,e);e.fill.color=new Rgb(255,0,0),e.canvas=this.canvas,e.draw()}_drawAxis(){}_drawBorder(){}_drawOptions(){var t=new Aspect(this.end.x-this.start.x+20,this.end.y-this.start.y+20);this.#options.border&&this._drawBorder(t),this.#options.axis&&this._drawAxis(),this.#options.anchor&&this._drawAnchor(),this.#options.points&&this.drawPoints(),this.#options.coordinates&&this.showCoordinates(),this.#options.controlPoints&&this.showControlPoints()}_rotatePoint(){}_setPath(){0!=this.controlPoints.p0||0!=this.controlPoints.p1||0!=this.controlPoints.p2||0!=this.controlPoints.p3?this._canvas.bezierCurveTo(this.controlPoints.p0+this.start.x,this.controlPoints.p1+this.start.y,this.controlPoints.p2+this.end.x,this.controlPoints.p3+this.end.y,this.end.x,this.end.y):this._canvas.lineTo(this.end.x,this.end.y)}_setShadow(){}get center(){var t=this.start.x>this.end.x?this.end.x+(this.start.x-this.end.x)/2:this.start.x+(this.end.x-this.start.x)/2,e=this.start.y>this.end.y?this.end.y+(this.start.y-this.end.y)/2:this.start.y+(this.end.y-this.start.y)/2;return new Point(t,e)}curve(t,e,i,s){this.controlPoints.p0=t,this.controlPoints.p1=e,this.controlPoints.p2=i,this.controlPoints.p3=s}drawPoints(){this._start.drawOptions(),this._end.drawOptions()}move(t,e){var i=this._rotatePoint({x:this.start.x,y:this.start.y},t,e),t=this._rotatePoint({x:this.end.x,y:this.end.y},t,e);[this.start.x,this.start.y]=[i.x,i.y],[this.end.x,this.end.y]=[t.x,t.y]}_setAnchorPoint(){var t=new Point;switch(this.anchor.align){case"start":[t.x,t.y]=[this.start.x,this.start.y];break;case"end":[t.x,t.y]=[this.end.x,this.end.y];break;case"center":[t.x,t.y]=[.5*(this.start.x+this.end.x),.5*(this.start.y+this.end.y)];break;default:console.warn(`"${anchor}" is not a valid 'anchor' variable !`)}}rotate(){}showControlPoints(t=10,e=16){var i=new Point(this.start.x,this.start.y),s=new Point(this.controlPoints.p0+this.start.x,this.controlPoints.p1+this.start.y),o=new Point(this.controlPoints.p2+this.end.x,this.controlPoints.p3+this.end.y),n=new Point(this.end.x,this.end.y),r=new Text(s.x,s.y,`( ${this.#controlPoints.p0}, ${this.#controlPoints.p1} )`),a=new Text(o.x,o.y,`( ${this.#controlPoints.p3}, ${this.#controlPoints.p4} )`),e=(r.canvas=a.canvas=this.canvas,r.size=a.size=e,r.offset.y=a.offset.y=-2*t,r.stroke.color=a.stroke.color=new Rgb(255,0,0),r.options.shadow=a.options.shadow=!0,r.shadow.color=a.shadow.color=new Rgb(255,255,255),r.shadow.blur=a.shadow.blur=1,r.shadow.x=a.shadow.x=r.shadow.y=a.shadow.y=1,r.draw(),a.draw(),new Rgb(255,0,0)),t=new Rgb(0,0,255),r=new Rgb(0,255,0),a=new Line(i,s),i=new Line(o,n),n=new Line(s,o),r=(new Lines(a,i,n),a.stroke.type=i.stroke.type=n.stroke.type=1,a.stroke.segments=i.stroke.segments=n.stroke.segments=[2,4],a.canvas=i.canvas=n.canvas=this.canvas,[a.stroke.color,i.stroke.color,n.stroke.color]=[e,t,r],a.draw(),i.draw(),n.draw(),new Circle(s)),a=new Circle(o);r.radius=a.radius=3,r.stroke.color.alpha=a.stroke.color.alpha=0,r.canvas=a.canvas=this.canvas,[r.fill.color,a.fill.color]=[e,t],r.draw(),a.draw()}showCoordinates(t=10,e=16){var i=new Text(this.start,`( ${this.start.x}, ${this.start.y} )`),s=new Text(this.end,`( ${this.end.x}, ${this.end.y} )`);i.canvas=s.canvas=this.canvas,i.size=s.size=e,i.options.shadow=s.options.shadow=!1,i.offset.y=s.offset.y=-2*t,i.options.shadow=s.options.shadow=!0,i.shadow.color=s.shadow.color=new Rgb(255,255,255),i.shadow.blur=s.shadow.blur=1,i.shadow.x=s.shadow.x=i.shadow.y=s.shadow.y=1,i.draw(),s.draw()}draw(t){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this.#options.shadow&&this._setShadow(),this._canvas.strokeStyle=this.stroke.color.toCss(),this._canvas.lineCap=this.lineCap,this._canvas.lineWidth=this.stroke.width,this._canvas.setLineDash("solid"===this.stroke.type?new Array:this.stroke.segments),this._canvas.beginPath(),this._canvas.moveTo(this.start.x+.5,this.start.y+.5),this._setPath(),this._canvas.stroke(),this.#options.shadow&&(this._canvas.shadowColor=new Rgb(0,0,0,0).toCss()),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class Rectangle{_point=new Point;_aspect=new Aspect;_round=new Array;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_anchor=new Anchor;_canvas=void 0;#options=new Options;#position=new Position;constructor(t={x:void 0,y:void 0},e={width:void 0,height:void 0},i=[0,0,0,0],s={color:void 0,type:void 0,segments:void 0,width:void 0},o={color:void 0,type:void 0},n={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},r){this._isAspect=VALIDATION.isAspect,this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._drawAnchor=UTILITIES.individual.draw.anchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._rotatePoint=UTILITIES.individual.misc.rotatePoint,this._setAnchorPoint=UTILITIES.individual.set.anchorPoint,this._setFillType=UTILITIES.individual.set.fillType,this._setShadow=UTILITIES.individual.set.shadow,this.move=UTILITIES.individual.misc.move,this.rotate=UTILITIES.individual.misc.rotate,this.showCoordinates=UTILITIES.individual.misc.showCoordinates,Object.defineProperty(this,"area",PROPERTY_BLOCKS.individual.area),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),Object.defineProperty(this,"center",PROPERTY_BLOCKS.individual.center),Object.defineProperty(this,"perimeter",PROPERTY_BLOCKS.individual.perimeter),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),delete this.#options._controlPoints,delete this.#options._points,delete this.#options._master,this.point=t,this.width=null!=e.width?e.width:50,this.height=null!=e.height?e.height:50,this.round=i,this._stroke=new Stroke(s.color,s.type,s.segments,s.width),this._fill=new Fill(o.color,o.type),this._shadow=new Shadow(n.color,n.blur,n.offset),this.canvas=r,this.#options.shadow=null!=n.offset.x&&null!=n.offset.y,this.#position.master=this}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set aspect(t){this._aspect=this._isAspect(t)?t:this._aspect}get aspect(){return this._aspect}set width(t){this._aspect.width="number"==typeof t&&0<t?t:this._aspect._width}get width(){return this._aspect.width}set height(t){this._aspect.height="number"==typeof t&&0<t?t:this._aspect._height}get height(){return this._aspect.height}set round(t){this._round=Array.isArray(t)?t:this._round}get round(){return this._round}get stroke(){return this._stroke}get fill(){return this._fill}get shadow(){return this._shadow}set canvas(t){}get canvas(){}get anchor(){return this._anchor}get options(){return this.#options}get position(){return this.#position}_isAspect(){}_isDegree(){}_isInDom(){}_isPoint(){}isThere(t){if(t instanceof this.constructor)return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height;console.warn(`"${t.constructor.name}" is not of type `+this.constructor.name)}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptions(){var t=new Aspect(this.width+20,this.height+20);this.#options.border&&this._drawBorder(t),this.#options.axis&&this._drawAxis(20),this.#options.anchor&&this._drawAnchor(),this.#options.coordinates&&this.showCoordinates()}_rotatePoint(){}_setAnchorPoint(){}_setFillType(){}_setShadow(){}get area(){}get center(){}fillColorCycle(){}gradientColorCycle(){}move(){}get perimeter(){}rotate(){}showCoordinates(){}draw(t){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this._setAnchorPoint(),this.#options.shadow&&this._setShadow(),this._canvas.strokeStyle=this.stroke.color.toCss(),this._setFillType(),this._canvas.lineWidth=this.stroke.width,this._canvas.setLineDash("solid"===this.stroke.type?new Array:this.stroke.segments),this._canvas.beginPath(),this._canvas.roundRect(this.anchor.x,this.anchor.y,this.width,this.height,this.round),this._canvas.stroke(),"pattern"!=this.fill.type&&this._canvas.fill(),this.#options.shadow&&(this._canvas.shadowColor=new Rgb(0,0,0,0).toCss()),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class RoundedRectangle extends Rectangle{_round=[5,5,5,5]}class Text extends Font{_point=new Point;_text=void 0;_stroke=new Stroke;_fill=new Fill;_shadow=new Shadow;_canvas=void 0;#options=new Options;#position=new Position;constructor(t={x:void 0,y:void 0},e,i,s,o,n,r={x:void 0,y:void 0},a={color:void 0,type:void 0,segments:void 0,width:void 0},h={color:void 0,type:void 0},c={color:void 0,blur:void 0,offset:{x:void 0,y:void 0}},d){super(),this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._drawAnchor=UTILITIES.individual.draw.anchor,this._rotatePoint=UTILITIES.individual.misc.rotatePoint,this._setFillType=UTILITIES.individual.set.fillType,this._setShadow=UTILITIES.individual.set.shadow,this.move=UTILITIES.individual.misc.move,this.rotate=UTILITIES.individual.misc.rotate,this.showCoordinates=UTILITIES.individual.misc.showCoordinates,Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),Object.defineProperty(this,"offset",PROPERTY_BLOCKS.individual.offset),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),a.width=void 0===a.width?0:a.width,h.color=void 0===h.color?new Rgb(0,0,0):h.color,this.point=t,this.text=e,super.type=i,super.size=s,super.weight=o,super.maxWidth=n,super.offset.x=r.x,super.offset.y=r.y,this._stroke=new Stroke(a.color,a.type,a.segments,a.width),this._fill=new Fill(h.color,h.type),this._shadow=new Shadow(c.color,c.blur,{x:c.offset.x,y:c.offset.y}),this.canvas=d,this.#options.shadow=null!=c.offset.x&&null!=c.offset.y,this.#position.master=this}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}set text(t){this._text="string"==typeof t?t:void 0}get text(){return this._text}get stroke(){return this._stroke}get fill(){return this._fill}get shadow(){return this._shadow}set canvas(t){}get canvas(){}get options(){return this.#options}get position(){return this.#position}set type(t){super.type=t}get type(){return super.type}set size(t){super.size=t}get size(){return super.size}set weight(t){super.weight=t}get weight(){return super.weight}set maxWidth(t){super.maxWidth=null==t&&null!=this._canvas?this._canvas.measureText(t):t}get maxWidth(){return super.maxWidth}set offset(t){}get offset(){}get font(){return super.font}_isDegree(){}_isInDom(){}_isPoint(){}_rotatePoint(){}_setFillType(){}_setShadow(){}_drawAnchor(){}_drawAxis(t=10){var e=new Rgb(245,80,50,1),i=super.size,s=this._canvas.measureText(this.text).width,o=i-t/2,s=new Aspect(s+t,o),o=new Point(this.x-s.width/2-2*t,this.y-s.height/2.5),n=new Point(this.x+s.width/2+2*t,this.y-s.height/2.5),t=new Point(this.x,this.y-s.height-t),s=new Point(this.x,this.y+s.height-i/2),i=new Line(o,n,{color:e,type:"solid",segments:void 0,width:1},void 0,void 0,this.canvas),o=new Line(t,s,{color:e,type:"solid",segments:void 0,width:1},void 0,void 0,this.canvas);i.draw(),o.draw()}_drawBorder(t=10){var e=new Rgb(245,80,50,1),i=new Rgb(0,0,0,0),s=super.size,o=this._canvas.measureText(this.text).width,n=s-t/2,o=new Aspect(o+t,n),n=this.y-n/(60<s?3:30<s?3.5:4.5)-t/2,s=new Point(this.x,n);new Rectangle(s,o,void 0,{color:e,type:"solid",segments:void 0,width:1},{color:i,type:"solid"},void 0,this.canvas).draw()}_drawOptions(){this.#options.border&&this._drawBorder(),this.#options.axis&&this._drawAxis(),this.#options.anchor&&this._drawAnchor(),this.#options.coordinates&&this.showCoordinates()}move(){}rotate(){}showCoordinates(){}draw(t,e=0){null!=t&&(this.canvas=t),this._canvas instanceof CanvasRenderingContext2D?(this.#options.shadow&&this._setShadow(),[this.x,this.y]=[this.x+this.offset.x,this.y+this.offset.y],this._canvas.font=this.font,this._canvas.textAlign="center",this._setFillType(),this._canvas.fillText(this.text,this.x,this.y,this.maxWidth),0<this.stroke.width&&(t=this._canvas.lineWidth,this._canvas.lineWidth=this.stroke.width,this._canvas.strokeStyle=this.stroke.color.toCss(),this._canvas.strokeText(this.text,this.x,this.y,this.maxWidth),this._canvas.lineWidth=t),this.#options.shadow&&(this._canvas.shadowColor=new Rgb(0,0,0,0).toCss()),this._drawOptions()):console.warn(`'canvas' property is not set for ${this.constructor.name} !`)}}class cImage{_source=new Image;_primary={point:new Point,aspect:new Aspect};_secondary={point:void 0,aspect:void 0};_canvas=void 0;_anchor=new Anchor;#options=new Options;#position=new Position;constructor(t,e={point:{x:void 0,y:void 0},aspect:{width:void 0,height:void 0}},i={point:{x:void 0,y:void 0},aspect:{width:void 0,height:void 0}},s){this._isAspect=VALIDATION.isAspect,this._isDegree=VALIDATION.isDegree,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isPointNAspect=VALIDATION.isPointNAspect,this._drawAnchor=UTILITIES.individual.draw.anchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._rotatePoint=UTILITIES.individual.misc.rotatePoint,this._setAnchorPoint=UTILITIES.individual.set.anchorPoint,this.move=UTILITIES.individual.misc.move,this.rotate=UTILITIES.individual.misc.rotate,Object.defineProperty(this,"area",PROPERTY_BLOCKS.individual.area),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.individual.canvas),Object.defineProperty(this,"center",PROPERTY_BLOCKS.individual.center),Object.defineProperty(this,"perimeter",PROPERTY_BLOCKS.individual.perimeter),delete this.#options._controlPoints,delete this.#options._points,delete this.#options._master,this.source=t,this.primary=e,this.secondary=i,this.canvas=s,this.#position.master=this}set source(t){var e;"string"==typeof t&&((e=new Image).src=t,this._source=e,this.type="source")}get source(){return this._source}set point(t){this._primary.point=this._isPoint(t)?t:this._primary.point}get point(){return this._primary.point}set x(t){this._primary.point.x=t}get x(){return this._primary.point.x}set y(t){this._primary.point.y=t}get y(){return this._primary.point.y}set aspect(t){this._primary.aspect=this._isAspect(t)?t:this._primary.aspect}get aspect(){return this._primary.aspect}get width(){return this.source.width}get height(){return this.source.height}set primary(t){this._isPointNAspect(t)&&([this._primary.point,this._primary.aspect]=[t.point,t.aspect])}get primary(){return this._primary}set secondary(t){this._isPointNAspect(t)&&([this._secondary.point,this._secondary.aspect]=[t.point,t.aspect])}get secondary(){return this._secondary}set canvas(t){}get canvas(){}get anchor(){return this._anchor}get options(){return this.#options}get position(){return this.#position}_isAspect(){}_isInDom(){}_isPoint(){}_isPointNAspect(){}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptions(){var t=new Aspect(this.source.width+20,this.source.height+20);this.#options.border&&this._drawBorder(t),this.#options.axis&&this._drawAxis(),this.#options.anchor&&this._drawAnchor(),this.#options.coordinates&&this.showCoordinates()}_rotatePoint(){}_setAnchorPoint(){}get area(){}get center(){}get perimeter(){}move(){}rotate(){}showCoordinates(){}_drawImage(){this.secondary.point?this._canvas.drawImage(this._source,this.secondary.point.x,this.secondary.point.y,this.secondary.aspect.width,this.secondary.aspect.height,this.anchor.x,this.anchor.y,this.primary.aspect.width,this.primary.aspect.height):this._canvas.drawImage(this._source,this.anchor.x,this.anchor.y,this._source.width,this._source.height)}draw(t){null!=t&&(this.canvas=t),null===this.source.onload&&this._canvas instanceof CanvasRenderingContext2D?this.source.onload=()=>{this._setAnchorPoint(),this._drawImage(),this._drawOptions()}:(this._setAnchorPoint(),this._drawImage(),this._drawOptions())}}class Circles extends Array{_point=new Point;_stroke=new StrokeCollection;_shadow=new ShadowCollection;_aspect=new Aspect;_canvas=void 0;_template=void 0;_anchor=new Anchor;#options=new Options;#storage={type:Circle};constructor(t={x:void 0,y:void 0},e,i){super(),this._isAspect=VALIDATION.isAspect,this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isTemplate=VALIDATION.isTemplate,this._clearCanvas=UTILITIES.individual.misc.clearCanvas,this._drawAnchor=UTILITIES.collection.drawAnchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._drawOptionsPost=UTILITIES.collection.drawOptionsPost,this._setAnchorPoint=UTILITIES.collection.setAnchorPoint,this._setPointOffset=UTILITIES.collection.setPointOffset,this.draw=UTILITIES.collection.draw,this.push=UTILITIES.collection.push,Object.defineProperty(this,"anchor",PROPERTY_BLOCKS.collection.anchor),Object.defineProperty(this,"area",PROPERTY_BLOCKS.collection.area),Object.defineProperty(this,"aspect",PROPERTY_BLOCKS.collection.aspect),Object.defineProperty(this,"width",PROPERTY_BLOCKS.collection.aspectWidth),Object.defineProperty(this,"height",PROPERTY_BLOCKS.collection.aspectHeight),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.collection.canvas),Object.defineProperty(this,"center",PROPERTY_BLOCKS.collection.center),Object.defineProperty(this,"endPoint",PROPERTY_BLOCKS.collection.endPoint),Object.defineProperty(this,"perimeter",PROPERTY_BLOCKS.collection.perimeter),Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),this.point=t,this.canvas=e,this.template=i}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}get stroke(){return this._stroke}get shadow(){return this._shadow}get aspect(){}get width(){}get height(){}set canvas(t){}get canvas(){}set template(t){}get template(){}set anchor(t){}get anchor(){}get options(){return this.#options}get storageType(){return this.#storage.type}_isAspect(){}_isCanvasLabObject(){}_isInDom(){}_isPoint(){}_isTemplate(){}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptionsPost(){}_drawOptionsPre(t,e){var i;for(i of["shadow","points","controlPoints","coordinates"])e[i]&&(t.options[i]=!0)}_setAnchorPoint(){}_setAspect(){var[t,e]=[2*this._canvas.canvas.clientWidth,2*this._canvas.canvas.clientHeight];let[i,s]=[t,e],[o,n]=[-t,-e];if(0<this.length)if("Ellipses"===this.constructor.name)for(var r of this)i=r.x-r.radius.x<i?r.x-r.radius.x:i,o=r.x+r.radius.x>o?r.x+r.radius.x:o,s=r.y-r.radius.y<s?r.y-r.radius.y:s,n=r.y+r.radius.y>n?r.y+r.radius.y:n;else for(var a of this)i=a.x-a.radius<i?a.x-a.radius:i,o=a.x+a.radius>o?a.x+a.radius:o,s=a.y-a.radius<s?a.y-a.radius:s,n=a.y+a.radius>n?a.y+a.radius:n;else console.warn(`No ${this.constructor.name} exist to draw !`);[this._aspect.width,this._aspect.height]=[o-i,n-s],[this._aspect.offset.x,this._aspect.offset.y]=[i,s]}_setPointOffset(){}get area(){}get center(){}get endPoint(){}get perimeter(){}push(){}draw(){}}class Ellipses extends Circles{#options=new Options;get options(){return this.#options}}class Group extends Array{_point=new Point;_lines=new Lines;_circles=new Circles;_ellipses=new Ellipses;_rectangles=new Rectangles;_roundedRectangles=new RoundedRectangles;_texts=new Texts;_canvas=void 0;_template=void 0;#storage={types:["lines","circles","ellipses","rectangles","roundedRectangles","texts"]};constructor(t={x:void 0,y:void 0},e,i){super(),this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isInDom=VALIDATION.isInDom,this._isTemplate=VALIDATION.isTemplate,this._isPoint=VALIDATION.isPoint,Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),this.point=t,this.canvas=e,this.template=i}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}get lines(){return this._lines}get circles(){return this._circles}get ellipses(){return this._ellipses}get rectangles(){return this._rectangles}get roundedRectangles(){return this._roundedRectangles}get texts(){return this._texts}set canvas(t){this._canvas=t?this._isInDom(t)?document.getElementById(t).getContext("2d"):this._isCanvasLabObject(t)?null:console.warn(`"${t}" is not a valid DOM element !`):document.getElementById(window.canvaslab.canvas).getContext("2d")?document.getElementById(window.canvaslab.canvas).getContext("2d"):this._canvas;for(var e of this.#storage.types)if(0<this[e].length&&this._canvas instanceof CanvasRenderingContext2D)for(var i of this[e])i.canvas=this.canvas}get canvas(){return null!=this._canvas?this._canvas.canvas.id:void 0}set template(t){}get template(){}_isCanvasLabObject(){}_isInDom(){}_isPoint(){}_isTemplate(){}_setAllCanvases(){if(this._canvas)for(var t of this.#storage.types)this[t].length&&(this[t].canvas=this.canvas)}_setPointOffset(t){t.x+=this.x,t.y+=this.y}push(t){for(var e of arguments)switch(e.constructor.name){case"Line":this._lines.push(e);break;case"Circle":this._circles.push(e);break;case"Ellipse":this._ellipse.push(e);break;case"Rectangle":this._rectangles.push(e);break;case"RoundedRectangle":this._roundedRectangles.push(e);break;case"Lines":for(var i of e)this._lines.push(i);break;case"Circles":for(var s of e)this._circles.push(s);break;case"Ellipses":for(var o of e)this._ellipses.push(o);break;case"Rectangles":for(var n of e)this._rectangles.push(n);break;case"RoundedRectangles":for(var r of e)this._roundedRectangles.push(r)}}pop(t){for(var e of arguments)switch(e.constructor.name){case"Line":this._lines.pop(e);break;case"Circle":this._circles.pop(e);break;case"Ellipse":this._ellipse.pop(e);break;case"Rectangle":this._rectangles.pop(e);break;case"RoundedRectangle":this._roundedRectangles.pop(e);break;case"Lines":for(var i of e)this._lines.pop(i);break;case"Circles":for(var s of e)this._circles.pop(s);break;case"Ellipses":for(var o of e)this._ellipses.pop(o);break;case"Rectangles":for(var n of e)this._rectangles.pop(n);break;case"RoundedRectangles":for(var r of e)this._roundedRectangles.pop(r);break;default:console.warn(`"${e}" is not a supported type to be popped into `+this.constructor.name)}}draw(t){null!=t&&(this.canvas=t);for(var e of this.#storage.types)0<this[e].length?(this._setPointOffset(this[e]),this[e].draw()):console.warn(`No ${e} exist to draw !`)}}class Lines extends Array{_point=new Point;_stroke=new StrokeCollection;_shadow=new ShadowCollection;_lineCap="round";_aspect=new Aspect;_anchor=new Anchor;_canvas=void 0;_template=void 0;#options=new Options;#storage={type:Line};constructor(t={x:void 0,y:void 0},e,i){super(),this._isAspect=VALIDATION.isAspect,this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isTemplate=VALIDATION.isTemplate,this._clearCanvas=UTILITIES.individual.misc.clearCanvas,this._drawAnchor=UTILITIES.collection.drawAnchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._drawOptionsPost=UTILITIES.collection.drawOptionsPost,this._setAnchorPoint=UTILITIES.collection.setAnchorPoint,this.draw=UTILITIES.collection.draw,this.push=UTILITIES.collection.push,Object.defineProperty(this,"anchor",PROPERTY_BLOCKS.collection.anchor),Object.defineProperty(this,"area",PROPERTY_BLOCKS.collection.area),Object.defineProperty(this,"aspect",PROPERTY_BLOCKS.collection.aspect),Object.defineProperty(this,"width",PROPERTY_BLOCKS.collection.aspectWidth),Object.defineProperty(this,"height",PROPERTY_BLOCKS.collection.aspectHeight),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.collection.canvas),Object.defineProperty(this,"endPoint",PROPERTY_BLOCKS.collection.endPoint),Object.defineProperty(this,"perimeter",PROPERTY_BLOCKS.collection.perimeter),Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),this.point=t,this.canvas=e,this.template=i,this.stroke.master=this,0<arguments.length&&this.push.apply(this,arguments)}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}get stroke(){return this._stroke}get shadow(){return this._shadow}set lineCap(t){this._lineCap="butt"===t||"round"===t||"square"===t?t:this._lineCap}get lineCap(){return this._lineCap}get aspect(){}get width(){}get height(){}set anchor(t){}get anchor(){}set canvas(t){}get canvas(){}set template(t){}get template(){}get options(){return this.#options}get storageType(){return this.#storage.type}_isAspect(){}_isCanvasLabObject(){}_isInDom(){}_isPoint(){}_isTemplate(){}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptionsPost(){}_drawOptionsPre(t,e){var i;for(i of["shadow","points","controlPoints","coordinates"])e[i]&&(t.options[i]=!0)}_setAnchorPoint(){}_setAspect(){var[t,e]=[2*this._canvas.canvas.clientWidth,2*this._canvas.canvas.clientHeight];let[i,s]=[t,e],[o,n]=[-t,-e];if(0<this.length)for(var r of this)i=r.start.x<i?r.start.x:i,i=r.end.x<i?r.end.x:i,o=r.start.x>o?r.start.x:o,o=r.end.x>o?r.end.x:o,s=r.start.y<s?r.start.y:s,s=r.end.y<s?r.end.y:s,n=r.start.y>n?r.start.y:n,n=r.end.y>n?r.end.y:n;else console.warn(`No ${this.constructor.name} exist to draw !`);[this._aspect.width,this._aspect.height]=[o-i,n-s]}_setPointOffset(t){t.start.x+=this.x,t.end.x+=this.x,t.start.y+=this.y,t.end.y+=this.y}get area(){}get center(){var t,e=(t,e,i)=>void 0===t?e:e<i?e<t?e:t:i<t?i:t;let i,s=void 0;for(t of this)i=e(i,t.start.x,t.end.x),s=e(s,t.start.y,t.end.y);return[i,s]=[i+this.width/2,s+this.height/2],new Point(i,s)}get endPoint(){}get perimeter(){}push(){}draw(){}}class Rectangles extends Array{_point=new Point;_stroke=new StrokeCollection;_shadow=new ShadowCollection;_aspect=new Aspect;_canvas=void 0;_template=void 0;_anchor=new Anchor;#options=new Options;#storage={type:Rectangle};constructor(t={x:void 0,y:void 0},e,i){super(),this._isAspect=VALIDATION.isAspect,this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isTemplate=VALIDATION.isTemplate,this._clearCanvas=UTILITIES.individual.misc.clearCanvas,this._drawAnchor=UTILITIES.collection.drawAnchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._drawOptionsPost=UTILITIES.collection.drawOptionsPost,this._setAnchorPoint=UTILITIES.collection.setAnchorPoint,this._setPointOffset=UTILITIES.collection.setPointOffset,this.draw=UTILITIES.collection.draw,this.push=UTILITIES.collection.push,Object.defineProperty(this,"anchor",PROPERTY_BLOCKS.collection.anchor),Object.defineProperty(this,"area",PROPERTY_BLOCKS.collection.area),Object.defineProperty(this,"aspect",PROPERTY_BLOCKS.collection.aspect),Object.defineProperty(this,"width",PROPERTY_BLOCKS.collection.aspectWidth),Object.defineProperty(this,"height",PROPERTY_BLOCKS.collection.aspectHeight),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.collection.canvas),Object.defineProperty(this,"center",PROPERTY_BLOCKS.collection.center),Object.defineProperty(this,"endPoint",PROPERTY_BLOCKS.collection.endPoint),Object.defineProperty(this,"perimeter",PROPERTY_BLOCKS.collection.perimeter),Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),this.point=t,this.canvas=e,this.template=i}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}get stroke(){return this._stroke}get shadow(){return this._shadow}get aspect(){}get width(){}get height(){}set canvas(t){}get canvas(){}set template(t){}get template(){}set anchor(t){}get anchor(){}get options(){return this.#options}get storageType(){return this.#storage.type}_isAspect(){}_isCanvasLabObject(){}_isInDom(){}_isPoint(){}_isTemplate(){}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptionsPost(){}_drawOptionsPre(t,e){var i;for(i of["shadow","points","controlPoints","coordinates"])e[i]&&(t.options[i]=!0)}_setAnchorPoint(){}_setAspect(){var[t,e]=[2*this._canvas.canvas.clientWidth,2*this._canvas.canvas.clientHeight];let[i,s]=[t,e],[o,n]=[-t,-e];if(0<this.length)for(var r of this)i=r.x<i?r.x:i,o=r.x+r.width>o?r.x+r.width:o,s=r.y<s?r.y:s,n=r.y+r.height>n?r.y+r.height:n;else console.warn(`No ${this.constructor.name} exist to draw !`);[this._aspect.width,this._aspect.height]=[o-i,n-s],[this._aspect.offset.x,this._aspect.offset.y]=[i-25,s-25]}_setPointOffset(){}get area(){}get center(){}get endPoint(){}get perimeter(){}push(){}draw(){}}class RoundedRectangles extends Rectangles{#options=new Options;get options(){return this.#options}}class Texts extends Array{_point=new Point;_stroke=new StrokeCollection;_shadow=new ShadowCollection;_aspect=new Aspect;_canvas=void 0;_template=void 0;_anchor=new Anchor;#options=new Options;#storage={type:Text};constructor(t={x:void 0,y:void 0},e,i){super(),this._isAspect=VALIDATION.isAspect,this._isCanvasLabObject=VALIDATION.isCanvasLabObject,this._isInDom=VALIDATION.isInDom,this._isPoint=VALIDATION.isPoint,this._isTemplate=VALIDATION.isTemplate,this._clearCanvas=UTILITIES.individual.misc.clearCanvas,this._drawAnchor=UTILITIES.collection.drawAnchor,this._drawAxis=UTILITIES.individual.draw.axis,this._drawBorder=UTILITIES.individual.draw.border,this._drawOptionsPost=UTILITIES.collection.drawOptionsPost,this._setAnchorPoint=UTILITIES.collection.setAnchorPoint,this._setPointOffset=UTILITIES.collection.setPointOffset,this.draw=UTILITIES.collection.draw,this.push=UTILITIES.collection.push,Object.defineProperty(this,"anchor",PROPERTY_BLOCKS.collection.anchor),Object.defineProperty(this,"area",PROPERTY_BLOCKS.collection.area),Object.defineProperty(this,"aspect",PROPERTY_BLOCKS.collection.aspect),Object.defineProperty(this,"width",PROPERTY_BLOCKS.collection.aspectWidth),Object.defineProperty(this,"height",PROPERTY_BLOCKS.collection.aspectHeight),Object.defineProperty(this,"canvas",PROPERTY_BLOCKS.collection.canvas),Object.defineProperty(this,"center",PROPERTY_BLOCKS.collection.center),Object.defineProperty(this,"endPoint",PROPERTY_BLOCKS.collection.endPoint),Object.defineProperty(this,"perimeter",PROPERTY_BLOCKS.collection.perimeter),Object.defineProperty(this,"template",PROPERTY_BLOCKS.collection.template),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"x",PROPERTY_BLOCKS.individual.pointX),Object.defineProperty(this,"y",PROPERTY_BLOCKS.individual.pointY),this.point=t,this.canvas=e,this.template=i}set point(t){}get point(){}set x(t){}get x(){}set y(t){}get y(){}get stroke(){return this._stroke}get shadow(){return this._shadow}get aspect(){}get width(){}get height(){}set canvas(t){}get canvas(){}set template(t){}get template(){}set anchor(t){}get anchor(){}get options(){return this.#options}get storageType(){return this.#storage.type}_isAspect(){}_isCanvasLabObject(){}_isInDom(){}_isPoint(){}_drawAnchor(){}_drawAxis(){}_drawBorder(){}_drawOptionsPost(){}_drawOptionsPre(t,e){var i;for(i of["shadow","points","controlPoints","coordinates"])e[i]&&(t.options[i]=!0)}_setAnchorPoint(){}_setAspect(){var[t,e]=[2*this._canvas.canvas.clientWidth,2*this._canvas.canvas.clientHeight];let[i,s]=[t,e],[o,n]=[-t,-e],r=14,a=9;if(0<this.length)for(var h of this){var c=this._canvas.measureText(this.text).width,d=this._canvas.fontBoundingBoxAscent+this._canvas.fontBoundingBoxDescent;i=h.x<i?h.x:i,o=h.x+c>o?h.x+c:o,s=h.y<s?h.y:s,n=h.y+d>n?h.y+d:n}else console.warn(`No ${this.constructor.name} exist to draw !`);[this._aspect.width,this._aspect.height]=[o-i,n-s],[this._aspect.offset.x,this._aspect.offset.y]=[i-r,s-a]}_setPointOffset(){}get area(){}get center(){}get endPoint(){}get perimeter(){}push(){}draw(){}}class Queue{_entries=new Array;_index=0;_entry=void 0;#touched=!1;constructor(t){if(Array.isArray(t))this.entries=t;else for(var e of arguments)this.entry=e}set entries(t){this._entries=Array.isArray(t)?t:this._entries}get entries(){return this._entries}get index(){return this._index}set entry(t){"object"!=typeof t&&"function"!=typeof t||this._entries.push(t)}get entry(){return this._entry}get isEnd(){return this.#touched&&0===this._index}get isLast(){return this._entries.length-1===this._index}get isSet(){return 0<this._entries.length}get next(){this.#touched=!0;var t=this._entries[this._index];return this._index===this._entries.length-1?this._index=0:this._index=this._index+1,t}get reset(){[this._index,this.#touched]=[0,!1]}}class Animation{_object=void 0;_timing=void 0;_period=void 0;_change=void 0;#timings={easeInSine:t=>1-Math.cos(t*Math.PI/2),easeInCubic:t=>t*t*t,easeInQuint:t=>t*t*t*t*t,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI/3)),easeInQuad:t=>t*t,easeInQuart:t=>t*t*t*t,easeInExpo:t=>0===t?0:Math.pow(2,10*t-10),easeInBack:t=>2.70158*t*t*t-1.70158*t*t,easeOutSine:t=>Math.sin(t*Math.PI/2),easeOutCubic:t=>1-Math.pow(1-t,3),easeOutQuint:t=>1-Math.pow(1-t,5),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI/3))+1,easeOutQuad:t=>1-(1-t)*(1-t),easeOutQuart:t=>1-Math.pow(1-t,4),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeOutBack:t=>1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI/4.5)))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2+1,easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095)/2:(Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2};_options={cache:!1,active:!1};_queue=new Queue;#cache=new Array;constructor(t,e,i,s){this._isNumber=VALIDATION.isNumber,this._end=UTILITIES.animation.end,this._getInvertedAngle=UTILITIES.animation.getInvertedAngle,Object.defineProperty(this,"cache",PROPERTY_BLOCKS.animation.cache),Object.defineProperty(this,"cancel",PROPERTY_BLOCKS.animation.cancel),Object.defineProperty(this,"period",PROPERTY_BLOCKS.animation.period),Object.defineProperty(this,"queue",PROPERTY_BLOCKS.animation.queue),this.object=t,this.timing=e,this.period=i,this.change=s,this._options.active=!0}set object(t){this._object=t}get object(){return this._object}set timing(t){if(null!=t)switch(typeof t){case"string":this._timing=this.#timings[t];break;case"function":this._timing=t;break;default:console.warn(`"${t}" is not a valid timing type !`)}}get timing(){return this._timing}set period(t){}get period(){}set change(t){this._change=t}get change(){return this._change}set cache(t){}get cache(){}set queue(t){}get queue(){}_isNumber(){}_cacheObject(){let t=void 0;switch(this.object.constructor.name){case"Circle":t=new Circle(this.object.point);break;case"Ellipse":t=new Ellipse(this.object.point,this.object.radius,this.object.angle,this.object.stroke,this.object.fill,this.object.shadow,this.object.canvas);break;case"Rectangle":t=new Rectangle(this.object.point,this.object.aspect,this.object.round,this.object.stroke,this.object.fill,this.object.shadow,this.object.canvas);break;case"RoundedRectangle":t=new RoundedRectangle(this.object.point,this.object.aspect,this.object.round,this.object.stroke,this.object.fill,this.object.shadow,this.object.canvas);break;case"Text":t=new Text(this.object.point,this.object.text,this.object.type,this.object.size,this.object.weight,this.object.maxWidth,this.object.offset,this.object.stroke,this.object.fill,this.object.shadow,this.object.canvas)}this.#cache.push(t)}_checkQueue(){var t;this.queue.isSet&&(t=this.queue.next,this.object=t.object,this.timing=t.timing,this.period=t.period,this.change=t.change)}_clearCanvas(t){var e=document.getElementById(t.canvas);e&&t._canvas.clearRect(0,0,e.width,e.height)}_drawCache(){if(0<this.#cache.length)for(var t of this.#cache)t.draw()}_end(){}_getInvertedAngle(t){}_getPointByDegreeNDistance(t,e){var i=new Point,t=t%360;return i.x=this.object.position.origin.x-Math.cos(t*Math.PI/180)*e,i.y=this.object.position.origin.y-Math.sin(t*Math.PI/180)*e,i}_resetCanvasTransform(){0<canvaslab.rotation&&(this.object.rotate(-canvaslab.rotation),canvaslab.rotation=0)}_setCache(){this.queue.isSet&&!this.queue.isEnd?(this.change.cache&&this._cacheObject(),this.animate()):this._resetCanvasTransform(),console.info(". animation complete !")}_setPositionData(){for(var t in this.change){var e=this.change[t];switch(t){case"point":this.object.position.origin=this.object.point,this.object.position.distance=e,this.object.position.direction=e;break;case"startPoint":this.object.position.origin=this.object.start,this.object.position.distance=e,this.object.position.direction=e;break;case"endPoint":this.object.position.origin=this.object.end,this.object.position.distance=e,this.object.position.direction=e;break;case"move":this.object.position.origin=this.object.point,e.degree=this.change.rotatePoint?e.degree+this.change.rotatePoint:e.degree;var i=this._getPointByDegreeNDistance(e.degree,e.distance);this.object.position.distance=i,this.object.position.direction=i;break;case"radius":break;case"aspect":this.object.position.aspect=this.object.aspect;break;case"width":this.object.position.aspect.width=this.object.width;break;case"height":this.object.position.aspect.height=this.object.height;break;case"rotate":case"strokeColor":case"strokeAlpha":case"fillColor":case"fillAlpha":break;case"fillLinear":case"fillRadial":case"fillConic":break;case"curve":case"controlPoints":this.object.position.controlPoints=this.object.controlPoints.points;break;case"p0":this.object.position.controlPoints.p0=this.object.controlPoints.p0;break;case"p1":this.object.position.controlPoints.p1=this.object.controlPoints.p1;break;case"p2":this.object.position.controlPoints.p2=this.object.controlPoints.p2;break;case"p3":this.object.position.controlPoints.p3=this.object.controlPoints.p3;break;case"fontSize":this.object.position.fontSize=this.object.size;break;case"cache":this.cache=e}}}async _transition(t,e){for(var i in this.change){var s=this.change[i];switch(i){case"point":case"move":t.point={x:t.position.origin.x+t.position.distance*e*Math.cos(t.position.direction),y:t.position.origin.y+t.position.distance*e*Math.sin(t.position.direction)};break;case"startPoint":t.start={x:t.position.origin.x+t.position.distance*e*Math.cos(t.position.direction),y:t.position.origin.y+t.position.distance*e*Math.sin(t.position.direction)};break;case"endPoint":t.end={x:t.position.origin.x+t.position.distance*e*Math.cos(t.position.direction),y:t.position.origin.y+t.position.distance*e*Math.sin(t.position.direction)};break;case"radius":t.radius=s*e;break;case"angleStart":t.angle.start=s*e;break;case"angleEnd":t.angle.end=s*e;break;case"aspect":t.position.aspect.width+=(s.width-t.position.aspect.width)*e,t.aspect.width=t.position.aspect.width,t.position.aspect.height+=(s.height-t.position.aspect.height)*e,t.aspect.height=t.position.aspect.height;break;case"width":t.position.aspect.width+=(s-t.position.aspect.width)*e,t.aspect.width=t.position.aspect.width;break;case"height":t.position.aspect.height+=(s-t.position.aspect.height)*e,t.aspect.height=t.position.aspect.height;break;case"rotate":var o=e*(s-t.position.rotation);t.rotate(o),t.position.rotation+=o,canvaslab.rotation+=o;break;case"strokeColor":t.stroke.color.cycle(t.stroke.color,s,e,1);break;case"strokeAlpha":t.stroke.color.alpha=s*e;break;case"fillColor":t.fill.color.cycle(t.fill.color,s,e,1);break;case"fillAlpha":t.fill.color.alpha=s*e;break;case"fillLinear":case"fillRadial":case"fillConic":for(var n in s){var r=t.fill.gradient.stops[n],a=s[n];t.fill.gradient.stops[n].color.cycle(r.color,a.color,e,1)}break;case"shadowColor":t.shadow.color.cycle(t.shadow.color,s,e,1);break;case"shadowAlpha":t.shadow.color.alpha=s*e;break;case"shadowBlur":t.shadow.blur=s*e;break;case"shadowOffset":t.shadow.offset=new Point(s.x*e,s.y*e);break;case"curve":case"controlPoints":for(var h in s){var c=t.position.controlPoints[h],d=s[h];if(c!=d){var l=(d-c)*e;switch(h){case"0":t.controlPoints.p0=l;break;case"1":t.controlPoints.p1=l;break;case"2":t.controlPoints.p2=l;break;case"3":t.controlPoints.p3=l}}}break;case"p0":t.controlPoints.p0=(s-t.position.controlPoints.p0)*e;break;case"p1":t.controlPoints.p1=(s-t.position.controlPoints.p1)*e;break;case"p2":t.controlPoints.p2=(s-t.position.controlPoints.p2)*e;break;case"p3":t.controlPoints.p3=(s-t.position.controlPoints.p3)*e;break;case"fontSize":t.size=(s-t.position.fontSize)*e+t.position.fontSize}}}get cancel(){}animate(){this._checkQueue(),this._resetCanvasTransform(),this._setPositionData();let o=this._object,n=this._timing,r=this._period,a=this._options.active,h=(t,e)=>this._transition(t,e),c=t=>this._clearCanvas(t),d=()=>this._drawCache(),l=()=>this._setCache(),p=()=>this._end();if(this._object&&this._period){let s=performance.now();requestAnimationFrame(function t(e){c(o);var e=(e-s)/r,i=(i=n(e))<0?0:i;h(o,i),o.draw(),d(),a?e<1?requestAnimationFrame(t):l():p()})}else console.warn('[ Animation ] :: The "object" and/or "period" properties are invalid !')}}class Animations{_objects=void 0;_timings=void 0;_periods=void 0;_changes=void 0;#timings={easeInSine:t=>1-Math.cos(t*Math.PI/2),easeInCubic:t=>t*t*t,easeInQuint:t=>t*t*t*t*t,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeInElastic:t=>0===t?0:1===t?1:-Math.pow(2,10*t-10)*Math.sin((10*t-10.75)*(2*Math.PI/3)),easeInQuad:t=>t*t,easeInQuart:t=>t*t*t*t,easeInExpo:t=>0===t?0:Math.pow(2,10*t-10),easeInBack:t=>2.70158*t*t*t-1.70158*t*t,easeOutSine:t=>Math.sin(t*Math.PI/2),easeOutCubic:t=>1-Math.pow(1-t,3),easeOutQuint:t=>1-Math.pow(1-t,5),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeOutElastic:t=>0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin((10*t-.75)*(2*Math.PI/3))+1,easeOutQuad:t=>1-(1-t)*(1-t),easeOutQuart:t=>1-Math.pow(1-t,4),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeOutBack:t=>1+2.70158*Math.pow(t-1,3)+1.70158*Math.pow(t-1,2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInOutElastic:t=>0===t?0:1===t?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*(2*Math.PI/4.5)))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*(2*Math.PI)/4.5)/2+1,easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInOutExpo:t=>0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInOutBack:t=>t<.5?Math.pow(2*t,2)*(7.189819*t-2.5949095)/2:(Math.pow(2*t-2,2)*(3.5949095*(2*t-2)+2.5949095)+2)/2};_options={cache:!1,active:!1};_queue=new Queue;#cache=new Array;constructor(t,e,i,s){this._isNumber=VALIDATION.isNumber,this._end=UTILITIES.animation.end,this._getInvertedAngle=UTILITIES.animation.getInvertedAngle,Object.defineProperty(this,"cache",PROPERTY_BLOCKS.animation.cache),Object.defineProperty(this,"cancel",PROPERTY_BLOCKS.animation.cancel),Object.defineProperty(this,"period",PROPERTY_BLOCKS.animation.period),Object.defineProperty(this,"queue",PROPERTY_BLOCKS.animation.queue),this.objects=t,this.timings=e,this.period=i,this.changes=s,this._options.active=!0}set objects(t){this._objects=t}get objects(){return this._objects}set timings(t){if(Array.isArray(t)){var e,i=new Array;for(e of t)"string"==typeof e?i.push(this.#timings[e]):i.push(e);this._timings=i}else this._timings=null!=t?"string"==typeof t?this.#timings[t]:t:this._timings}get timings(){return this._timings}set period(t){}get period(){}set changes(t){this._changes=t}get changes(){return this._changes}set cache(t){}get cache(){}set queue(t){}get queue(){}_isNumber(){}_cacheObjects(t){let e=this.objects[t];switch(e.constructor.name){case"Circle":e=new Circle(e.point,e.radius,void 0,e.stroke);break;case"Ellipse":e=new Ellipse(e.point,void 0,void 0,e.stroke);break;case"Rectangle":e=new Rectangle(e.point,void 0,void 0,e.stroke);break;case"RoundedRectangle":e=new RoundedRectangle(e.point,void 0,void 0,e.stroke);break;case"Text":e=new Text(e.point,e.text,e.type,e.size,e.weight,e.maxWidth,e.offset,e.stroke,e.fill,e.shadow,e.canvas)}this.#cache.push(e)}_checkQueue(){var t;this.queue.isSet&&(t=this.queue.next,this.objects=this._getObjects(t),this.timings=this._getTimings(t),this.period=t.period,this.changes=t.change)}_clearCanvas(){var t=this.objects[0],e=document.getElementById(t.canvas);e&&t._canvas.clearRect(0,0,e.width,e.height)}_drawCache(){if(0<this.#cache.length)for(var t of this.#cache)t.stroke.color.alpha=.35,t.draw(),t.stroke.color.alpha=1}_end(){}_getInvertedAngle(t){}_getObjects(t){var e=new Array,i=t.object.constructor.name;return["Circles","Ellipses","Rectangles","RoundedRectangles","Texts"].includes(i)?e.concat(t.object):t.object}_getTimings(e){let i=void 0;if(Array.isArray(e.timing))i=e.timing;else{var s=this.objects.length;i=new Array;for(let t=0;t<s;t++)i.push(e.timing)}return i}_getPointByDegreeNDistance(t,e,i){var s=new Point,e=e%360;return s.x=this.objects[t].position.origin.x-Math.cos(e*Math.PI/180)*i,s.y=this.objects[t].position.origin.y-Math.sin(e*Math.PI/180)*i,s}_setCache(){if(this.queue.isSet&&!this.queue.isEnd){for(var t in this.changes)this.changes[t].cache&&this._cacheObjects(t);this.animate()}else console.info("animations complete !")}_setPositionData(){for(var t in this.objects){var e,i=this.objects[t],s=this.changes[t];for(e in s){var o=s[e];switch(e){case"point":i.position.origin=i.point,i.position.distance=o,i.position.direction=o;break;case"move":i.position.origin=i.point;var n=o.invert?this._getPointByDegreeNDistance(t,this._getInvertedAngle(o.degree),o.distance):this._getPointByDegreeNDistance(t,o.degree,o.distance);i.position.distance=n,i.position.direction=n;break;case"radius":case"rotate":case"strokeColor":case"strokeAlpha":case"fillColor":case"fillAlpha":break;case"fillLinear":case"fillRadial":case"fillConic":break;case"cache":this.cache=o}}}}async _transition(t,e){var i,s=this._objects[t],o=this._changes[t];for(i in o){var n=o[i];switch(i){case"point":case"move":s.point={x:s.position.origin.x+s.position.distance*e*Math.cos(s.position.direction),y:s.position.origin.y+s.position.distance*e*Math.sin(s.position.direction)};break;case"radius":s.radius=n*e;break;case"rotate":s.rotate(n);break;case"strokeColor":s.stroke.color.cycle(s.stroke.color,n,e,1);break;case"strokeAlpha":s.stroke.color.alpha=n*e;break;case"fillColor":s.fill.color.cycle(s.fill.color,n,e,1);break;case"fillAlpha":s.fill.color.alpha=n*e;break;case"fillLinear":case"fillRadial":case"fillConic":for(var r in n){var a=s.fill.gradient.stops[r],h=n[r];s.fill.gradient.stops[r].color.cycle(a.color,h.color,e,1)}break;case"rotate":break;case"lineTo":if(Array.isArray(n))for(var c of n)new Line(s.point,c.point).draw();else new Line(s.point,n.point).draw()}}}get cancel(){}animate(){this._checkQueue(),this._setPositionData();let r=this._objects,a=this._timings,h=this._period,c=this._changes,d=this._options.active,l=(t,e)=>this._transition(t,e),p=()=>this._clearCanvas(),_=()=>this._drawCache(),u=()=>this._setCache(),g=()=>this._end(),w=void 0,v=void 0;if(this._objects&&this._period){let n=performance.now();requestAnimationFrame(function t(e){for(var i in p(),r){var s=r[i],o=a[i];c[i];w=(e-n)/h,v=(v=o(w))<0?0:v,l(i,v),s.draw(),_()}d?w<1?requestAnimationFrame(t):u():g()})}else console.warn('[ Animations ] :: The "objects" and/or "period" properties are invalid !')}}class Application{_animation=void 0;#config={debug:!1,about:{Author:"Justin Don Byrne",Created:"October, 2 2023",Library:"Canvas Lab",Updated:"Sep, 27 2024",Version:"0.7.179",Copyright:"Copyright (c) 2023 Justin Don Byrne"}};#dom={canvases:void 0,contexts:{},window:{width:window.innerWidth-18,height:window.innerHeight-4,center:{x:(window.innerWidth-18)/4,y:(window.innerHeight-4)/2}},mouse:{start:void 0,end:void 0,down:!1,extant:-1,offset:{x:0,y:0}}};constructor(){this._isInDom=VALIDATION.isInDom}get animation(){return this._animation}set canvas(t){var e=document.getElementsByTagName("canvas");if(void 0===this.#dom.canvases){this.#dom.canvases=new Object;for(var i of e)this.#dom.canvases[i.id]=document.getElementById(i.id),this.#dom.contexts[i.id]=document.getElementById(i.id).getContext("2d")}this._isInDom(t)?(this.#dom.main.canvas=this.#dom.canvases[t],this.#dom.main.context=this.#dom.contexts[t]):console.warn(`"${t}" does not exist !`)}get canvas(){return this.#dom.main.context}get about(){return this.#config.about}get dom(){return this.#dom}_isInDom(){}get _center(){return{x:(window.innerWidth-18)/4,y:(window.innerHeight-4)/2}}set animation(t={object:object,timing:timing,period:period,change:change}){Array.isArray(t)?(Array.isArray(t[0].object)?this._animation=new Animations:this._animation=new Animation,this._animation.queue=new Queue(t)):Array.isArray(t.object)?this._animation=new Animations(t.object,t.timing,t.period,t.change):this._animation=new Animation(t.object,t.timing,t.period,t.change),this._animation.animate()}}let initCanvasLab=t=>{"function"==typeof canvasLab&&void 0===window.canvaslab&&(window.canvaslab=new canvasLab(t))};class SacredCircles{_point=new Point;_radius=25;_iterations=void 0;_degrees=[90,330,270,210,150,90,30];_colors=new Queue([new Rgb(255,255,255,0)]);_master=void 0;#numbers=void 0;#tangents=void 0;#counter=-1;#transitions=new Array;constructor(t={x:void 0,y:void 0},e,i,s,o){this._isCanvasLabObject=VALIDATION._isCanvasLabObject,this._isNumber=VALIDATION.isNumber,this._isPoint=VALIDATION.isPoint,Object.defineProperty(this,"master",PROPERTY_BLOCKS.individual.master),Object.defineProperty(this,"point",PROPERTY_BLOCKS.individual.point),Object.defineProperty(this,"radius",PROPERTY_BLOCKS.individual.radius),this.point=t,this.radius=e,this.iterations=i,this.degrees=s,this.colors=o,this._tangents=i}set point(t){}get point(){}set radius(t){}get radius(){}set iterations(t){this._iterations=this._isNumber(t)?t:this._iterations}get iterations(){return this._iterations}set degrees(t){this._degrees=Array.isArray(t)?new Queue(t):this._degrees}get degrees(){return this._degrees}set colors(t){this._colors=Array.isArray(t)?new Queue(t):this._colors}get colors(){return this._colors}set master(t){}get master(){}set _numbers(t){this.#numbers=Array.isArray(t)?new Queue(t):this.#numbers}set _tangents(t){this.#tangents=Number.isInteger(t)?this.#getTangents(t):this.#tangents}_isCanvasLabObject(){}_isNumber(){}_isPoint(){}#getCircle=(t,e)=>new Circle(t,this.radius,void 0,void 0,new Fill(e),void 0,void 0);#getEllipse=(t,e)=>new Ellipse(t,new Point(this.radius,.5*this.radius),void 0,void 0,new Fill(e),void 0,void 0);#getRectangle=(t,e)=>new Rectangle(t,void 0,void 0,void 0,new Fill(e),void 0,void 0);#getRoundedRectangle=(t,e)=>new RoundedRectangle(t,void 0,void 0,void 0,new Fill(e),void 0,void 0);#getText=(t,e)=>new Text(t,this.#numbers.next,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);#getLine=(t,e)=>new Line(t,e,void 0,void 0,void 0,void 0);#insertInitialObject(t,e,i,s){t=this._getObjectPerCollectionType(t,s);this._moveObject(t,i,this.radius*e),this._setObjectPerCollectionType(t)}#insertEnsuingObjects(t,e){e=this._getObjectPerCollectionType(this.master.circles.endPoint,e);this._moveObject(e,t,this.radius),this._setObjectPerCollectionType(e)}#getTangents(){var e=new Array;let i=0;for(let t=1;t<=this.iterations;t++)e.push(6*i),i=t+i;return 1<this.iterations&&e.shift(),e}_getObjectPerCollectionType(t,e){let i=void 0;switch(this.master.constructor.name){case"Circles":i=this.#getCircle(t,e);break;case"Ellipses":i=this.#getEllipse(t,e);break;case"Rectangles":i=this.#getRectangle(t,e);break;case"RoundedRectangles":i=this.#getRoundedRectangle(t,e);break;case"Texts":i=this.#getText(t,e);break;case"Group":var s=this.#getCircle(t,e),o=this.#getEllipse(t,e),n=this.#getRectangle(t,e),r=this.#getRoundedRectangle(t,e),a=this.#getText(t,e);i=new Array(s,o,n,r,a)}return i}_moveObject(t,e,i){if(Array.isArray(t))for(var s of t)s.move(e,i);else t.move(e,i)}_setObjectPerCollectionType(t){var e=this.master.constructor.name;if("Group"===e)for(var i of t){var s=i.constructor.name.toLowerCase()+"s";this.master["roundedrectangles"==s?"roundedRectangles":s].push(i)}this.master.push(t)}_setTransition(t,e,i,s){this.#transitions.push({object:t,timing:e,period:i,change:s})}getTransitions(i,s,o,t,e){this.iterations=e,this.radius=t,this._setTransition(i,s,1,{cache:!0});for(let e=0;e<this.iterations;e++){for(let t=0;t<1;t++)this._setTransition(i,s,o,{move:{degree:this.degrees[0],distance:this.radius},cache:!0});for(let t=0;t<=e;t++)this._setTransition(i,s,o,{move:{degree:this.degrees[1],distance:this.radius},cache:!0});for(let t=0;t<=e;t++)this._setTransition(i,s,o,{move:{degree:this.degrees[2],distance:this.radius},cache:!0});for(let t=0;t<=e;t++)this._setTransition(i,s,o,{move:{degree:this.degrees[3],distance:this.radius},cache:!0});for(let t=0;t<=e;t++)this._setTransition(i,s,o,{move:{degree:this.degrees[4],distance:this.radius},cache:!0});for(let t=0;t<=e;t++)this._setTransition(i,s,o,{move:{degree:this.degrees[5],distance:this.radius},cache:!0});for(let t=0;t<=e;t++)t==e?this._setTransition(i,s,o,{move:{degree:this.degrees[6],distance:this.radius},cache:!1}):this._setTransition(i,s,o,{move:{degree:this.degrees[6],distance:this.radius},cache:!0})}return this.#transitions}get totalObjects(){return void 0===this.#tangents&&(this.#tangents=this.#getTangents()),this.#tangents[this.#tangents.length-1]}init(){this._numbers=Array.from({length:this.totalObjects},(t,e)=>e.toString());for(let s=0;s<this.iterations;s++){this.degrees.reset;let[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<1;t++)this.#insertInitialObject(this.point,s,e,i);[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<=s-1;t++)this.#insertEnsuingObjects(e,i);[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<=s-1;t++)this.#insertEnsuingObjects(e,i);[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<=s-1;t++)this.#insertEnsuingObjects(e,i);[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<=s-1;t++)this.#insertEnsuingObjects(e,i);[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<=s-1;t++)this.#insertEnsuingObjects(e,i);[e,i]=[this.degrees.next,this.colors.next];for(let t=0;t<=s-2;t++)this.#insertEnsuingObjects(e,i)}this.master.ellipses.reverse(),this.master.rectangles.reverse(),this.master.roundedRectangles.reverse()}}